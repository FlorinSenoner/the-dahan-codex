---
status: diagnosed
phase: 03.3-spirit-board-final-polish
source: [03.3-01-SUMMARY.md, 03.3-02-SUMMARY.md]
started: 2026-01-27T10:15:00Z
updated: 2026-01-27T10:45:00Z
---

## Current Test

[testing complete - blocker found]

## Tests

### 1. G1/G2/G3 labels hidden by default
expected: Growth cards do not show G1/G2/G3 labels when not hovering
result: pass

### 2. G1/G2/G3 labels appear on hover
expected: Hovering over a growth card reveals the G1/G2/G3 label in the top-right corner
result: pass

### 3. GitBranch tooltip on Finder's branching track
expected: On Finder's presence track, hovering over the GitBranch icon shows a tooltip explaining the track connection (e.g., "Connects to Card Plays at slot 3")
result: issue
reported: "This is absolutely not what we need. We need to rework the DSL on how presence tracks are described. Right now it's different tracks. But for spirits like Finder it's not different tracks but rather a web (tree). Need research on how others solved this."
severity: blocker

### 4. Sprout tooltip on Starlight's unlock tracks
expected: On Starlight's presence tracks, hovering over the Sprout icon shows a tooltip explaining "Unlocks additional growth options"
result: skipped
reason: Blocked by Test 3 - presence track DSL needs redesign first

### 5. presenceCap display on Serpent's Deep Slumber track
expected: On Serpent's Deep Slumber track, slots show presence cap values (5-13) with stone/gray styling distinct from regular energy/cardPlays tracks
result: skipped
reason: Blocked by Test 3 - presence track DSL needs redesign first

## Summary

total: 5
passed: 2
issues: 1
pending: 0
skipped: 2

## Gaps

- truth: "Presence tracks correctly represent branching/web/tree structures for complex spirits like Finder"
  status: failed
  reason: "User reported: Current DSL uses separate linear tracks. Finder's board is a web/tree structure, not independent tracks. Need to rework the entire presence track DSL."
  severity: blocker
  test: 3
  root_cause: "Current schema models tracks as separate linear arrays with simple connectsTo property. Spirits like Finder have interconnected graph structures where players can traverse in either direction and paths converge."
  artifacts:
    - path: "convex/schema.ts"
      issue: "presenceTracks uses linear array model, needs graph-based model"
    - path: "convex/seed.ts"
      issue: "Finder data uses tracks[] array instead of graph nodes/edges"
    - path: "app/components/spirits/presence-track.tsx"
      issue: "Component renders linear tracks, needs grid renderer"
  missing:
    - "Grid-based schema for presence tracks (Option C from research)"
    - "Graph renderer component for complex spirits"
    - "Accurate Finder/Starlight/Serpent board data from physical components"
  debug_session: ".planning/debug/presence-track-graph-dsl.md"
