---
phase: 02-spirit-library
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.ts
  - app/styles/globals.css
  - app/lib/utils.ts
  - app/routes/__root.tsx
  - components.json
  - app/components/ui/button.tsx
  - app/components/ui/badge.tsx
  - app/components/ui/card.tsx
  - app/components/ui/drawer.tsx
autonomous: true

must_haves:
  truths:
    - "App renders with dark theme by default"
    - "Tailwind utility classes are applied correctly"
    - "shadcn/ui components are available for import"
  artifacts:
    - path: "app/styles/globals.css"
      provides: "Tailwind imports and Spirit Island theme variables"
      contains: "@import \"tailwindcss\""
    - path: "app/lib/utils.ts"
      provides: "cn() class merging utility"
      exports: ["cn"]
    - path: "app/components/ui/button.tsx"
      provides: "Button component from shadcn"
      exports: ["Button"]
  key_links:
    - from: "app/routes/__root.tsx"
      to: "app/styles/globals.css"
      via: "CSS import"
      pattern: "import.*globals.css"
---

<objective>
Set up Tailwind CSS v4 with shadcn/ui and configure the Spirit Island dark theme design system.

Purpose: Establish the visual foundation that all Phase 2 UI components will build upon.
Output: Working Tailwind + shadcn/ui setup with Spirit Island theme colors (dark mode default).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-spirit-library/02-CONTEXT.md
@.planning/phases/02-spirit-library/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Tailwind v4 and shadcn/ui dependencies</name>
  <files>
    package.json
    vite.config.ts
  </files>
  <action>
Install Tailwind CSS v4 and required dependencies:

```bash
pnpm add tailwindcss @tailwindcss/vite
pnpm add class-variance-authority clsx tailwind-merge lucide-react
```

Update vite.config.ts to add the Tailwind plugin:
- Import `tailwindcss` from `@tailwindcss/vite`
- Add `tailwindcss()` to the plugins array (should be early in the array, before React plugin)

Do NOT create a tailwind.config.js - Tailwind v4 uses CSS-first configuration.
  </action>
  <verify>
Run `pnpm typecheck` - should pass with no errors.
Run `pnpm dev` briefly - should start without Tailwind-related errors.
  </verify>
  <done>Tailwind v4 plugin is registered in Vite config and dependencies installed.</done>
</task>

<task type="auto">
  <name>Task 2: Configure shadcn/ui with Spirit Island theme</name>
  <files>
    components.json
    app/styles/globals.css
    app/lib/utils.ts
    app/routes/__root.tsx
    app/components/ui/button.tsx
    app/components/ui/badge.tsx
    app/components/ui/card.tsx
    app/components/ui/drawer.tsx
  </files>
  <action>
**Step 1: Create globals.css with Tailwind and theme**

Create `app/styles/globals.css` with:
- `@import "tailwindcss";` at the top
- CSS variables in `:root` for light mode (minimal, just for completeness)
- CSS variables in `.dark` selector for Spirit Island night forest theme:
  - `--background: oklch(0.15 0.02 90)` (deep earth)
  - `--foreground: oklch(0.92 0.01 90)` (warm white)
  - `--primary: oklch(0.55 0.14 145)` (moss green)
  - `--secondary: oklch(0.35 0.08 60)` (bark brown)
  - `--accent: oklch(0.60 0.15 30)` (ember orange)
  - `--muted: oklch(0.25 0.02 90)` (shadowed earth)
  - `--muted-foreground: oklch(0.65 0.02 90)` (soft text)
  - `--border: oklch(0.30 0.03 90)` (twilight edge)
  - `--card: oklch(0.18 0.02 85)` (deeper earth)
  - `--card-foreground: oklch(0.92 0.01 90)`
  - `--destructive: oklch(0.55 0.20 25)` (muted red)
  - `--ring: oklch(0.55 0.14 145)` (matches primary)
  - `--radius: 0.75rem` (botanical rounded corners)
- Element colors for Spirit Island:
  - `--element-sun: oklch(0.70 0.15 80)`
  - `--element-moon: oklch(0.60 0.10 280)`
  - `--element-fire: oklch(0.60 0.18 25)`
  - `--element-air: oklch(0.75 0.08 220)`
  - `--element-water: oklch(0.55 0.12 240)`
  - `--element-earth: oklch(0.50 0.10 60)`
  - `--element-plant: oklch(0.55 0.14 140)`
  - `--element-animal: oklch(0.55 0.12 50)`
- Add `@theme inline` block to expose CSS vars to Tailwind
- Add base layer reset (body background/foreground)
- Add Google Fonts import for Fraunces (headlines) and Lora (body) at top of file

**Step 2: Create utils.ts**

Create `app/lib/utils.ts`:
```typescript
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

**Step 3: Update __root.tsx**

- Add `class="dark"` to the `<html>` element to enable dark mode by default
- Import the globals.css file: `import "../styles/globals.css";`
- Add font classes to body: `className="font-body antialiased bg-background text-foreground"`

**Step 4: Initialize shadcn/ui**

Create `components.json` in project root for shadcn configuration:
```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "app/styles/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "iconLibrary": "lucide"
}
```

**Step 5: Add tsconfig paths**

Update `tsconfig.json` to add path aliases if not already present:
```json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./app/*"]
    }
  }
}
```

**Step 6: Add shadcn/ui components**

Run these commands to add the needed components:
```bash
pnpm dlx shadcn@latest add button badge card drawer
```

If shadcn CLI prompts, accept defaults. This will create files in `app/components/ui/`.

After CLI runs, verify the components exist and adjust imports if needed to use the `@/` alias pattern.
  </action>
  <verify>
Run `pnpm typecheck` - should pass.
Run `pnpm dev` and visit http://localhost:5173 - page should render with dark background.
Verify `app/components/ui/button.tsx` exists and exports Button component.
  </verify>
  <done>
- globals.css has Tailwind import and Spirit Island theme variables
- cn() utility is available at @/lib/utils
- Dark mode is applied by default (html has class="dark")
- shadcn/ui components (button, badge, card, drawer) are installed
  </done>
</task>

</tasks>

<verification>
After completing both tasks:
1. `pnpm typecheck` passes
2. `pnpm lint` passes (run `pnpm lint:fix` if needed)
3. `pnpm dev` shows app with dark theme background
4. Button, Badge, Card, Drawer components importable from @/components/ui/*
</verification>

<success_criteria>
- Tailwind v4 is configured and working
- Spirit Island dark theme is applied by default
- shadcn/ui components are available
- cn() utility exists for class merging
- No TypeScript or lint errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-spirit-library/02-01-SUMMARY.md`
</output>
