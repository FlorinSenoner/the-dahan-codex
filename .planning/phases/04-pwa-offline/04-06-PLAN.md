---
phase: 04-pwa-offline
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/pwa/offline-indicator.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Offline indicator is subtle and does not obstruct content"
    - "Indicator appears at bottom-right above BottomNav"
    - "Indicator uses muted styling that matches app aesthetic"
  artifacts:
    - path: "app/components/pwa/offline-indicator.tsx"
      provides: "Subtle bottom-right offline indicator"
      contains: "bottom-20"
  key_links:
    - from: "app/components/pwa/offline-indicator.tsx"
      to: "app/hooks/useOnlineStatus"
      via: "useOnlineStatus hook"
      pattern: "useOnlineStatus"
---

<objective>
Redesign offline indicator to be subtle and non-intrusive

Purpose: The current full-width amber banner at the top causes visual disruption during navigation. Since the app works seamlessly offline, the indicator should be minimal.

Output: Subtle bottom-right pill indicator with muted styling
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/components/pwa/offline-indicator.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign offline indicator to subtle bottom-right pill</name>
  <files>app/components/pwa/offline-indicator.tsx</files>
  <action>
Redesign the OfflineIndicator component:

1. Change positioning:
   - Remove: `top-0 left-0 right-0`
   - Add: `bottom-20 right-4` (above BottomNav which is at bottom-0)

2. Change styling:
   - Remove: `bg-amber-600 text-white` (too prominent)
   - Add: `bg-zinc-800/90 text-zinc-300 border border-zinc-700` (muted, matches app aesthetic)

3. Change layout:
   - Remove: `flex items-center justify-center` (full-width banner layout)
   - Add: `inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full` (compact pill)

4. Reduce z-index:
   - Change: `z-50` to `z-40` (below modals, above content)

5. Keep accessible attributes:
   - Keep `output` element with `aria-live="polite"`
   - Keep WifiOff icon with `aria-hidden="true"`

6. Simplify text:
   - Change "You're offline" to "Offline" (more concise for pill)

Final component should look like:
```tsx
<output
  aria-live="polite"
  className="fixed bottom-20 right-4 z-40 inline-flex items-center gap-1.5 rounded-full border border-zinc-700 bg-zinc-800/90 px-3 py-1.5 text-sm text-zinc-300 animate-in fade-in"
>
  <WifiOff className="h-3.5 w-3.5" aria-hidden="true" />
  <span>Offline</span>
</output>
```
  </action>
  <verify>
Run `pnpm typecheck` to ensure no TypeScript errors.
Visual verification: The indicator should appear as a small pill in the bottom-right corner, not a full-width banner at the top.
  </verify>
  <done>
Offline indicator renders as subtle bottom-right pill with muted zinc styling, positioned at bottom-20 to clear BottomNav.
  </done>
</task>

</tasks>

<verification>
- `pnpm typecheck` passes
- `pnpm build` succeeds
- Offline indicator component renders correctly
</verification>

<success_criteria>
- Offline indicator uses bottom-20 right-4 positioning
- Uses muted bg-zinc-800/90 styling instead of prominent amber
- Compact pill shape instead of full-width banner
- z-index reduced from z-50 to z-40
</success_criteria>

<output>
After completion, create `.planning/phases/04-pwa-offline/04-06-SUMMARY.md`
</output>
