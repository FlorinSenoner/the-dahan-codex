---
phase: 02.1-spirit-library-polish
plan: 05
subsystem: ui
tags: [view-transitions, css, animation, accessibility]

# Dependency graph
requires:
  - phase: 02-05
    provides: View transition setup with inline viewTransitionName styles
provides:
  - Working view transition CSS with correct pseudo-element syntax
  - Smooth image morphing between list and detail pages
  - Prefers-reduced-motion support
affects: [03-opening-scrubber]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "View transition CSS using ::view-transition-group(*) wildcard for dynamic names"
    - "Fade-out/fade-in keyframes for smooth crossfade transitions"
    - "prefers-reduced-motion media query with animation-delay reset"

key-files:
  created: []
  modified:
    - app/styles/globals.css

key-decisions:
  - "Use wildcard (*) pseudo-element argument since CSS cannot match partial names dynamically"
  - "400ms duration with cubic-bezier timing for natural feel"
  - "150ms delay on fade-in for crossfade overlap effect"

patterns-established:
  - "View transition pseudo-element syntax: ::view-transition-old(*), ::view-transition-new(*)"
  - "Matching viewTransitionName values between source and target pages"

# Metrics
duration: 3min
completed: 2026-01-25
---

# Phase 02.1 Plan 05: View Transitions Summary

**View transition CSS fixed with correct ::view-transition pseudo-element syntax and wildcard matching for dynamic spirit names**

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-25T21:40:32Z
- **Completed:** 2026-01-25T21:43:30Z
- **Tasks:** 2
- **Files modified:** 1

## Accomplishments

- Fixed view transition CSS from invalid attribute selectors to correct pseudo-element syntax
- Verified view-transition-name values match exactly between list and detail pages
- Added prefers-reduced-motion support for accessibility

## Task Commits

Plan work was completed in a prior session:

1. **Task 1: Fix view transition CSS pseudo-element syntax** - `72b9f55` (fix)
2. **Task 2: Verify view-transition-name values match** - Verified via code review (no changes needed)

**Plan metadata:** This summary documents completion.

## Files Created/Modified

- `app/styles/globals.css` - Fixed view transition CSS with correct pseudo-element syntax

## Technical Details

### CSS Changes

The CSS was updated from invalid attribute selectors:
```css
/* INVALID - removed */
[style*="view-transition-name: spirit-image-"]::view-transition-old { ... }
```

To correct pseudo-element syntax:
```css
/* CORRECT - implemented */
::view-transition-group(*) {
  animation-duration: 400ms;
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

::view-transition-old(*) {
  animation: fade-out 250ms ease-out;
}

::view-transition-new(*) {
  animation: fade-in 250ms ease-in 150ms;
}
```

### View Transition Name Matching

Verified matching between components:

| Component | Base Spirit Image | Aspect Image | Base Spirit Name |
|-----------|-------------------|--------------|------------------|
| spirit-row.tsx | `spirit-image-${spirit.slug}` | `spirit-aspect-${aspectName}` | `spirit-name-${spirit.slug}` |
| spirits.$slug.tsx | `spirit-image-${slug}` | `spirit-aspect-${aspectName}` | `spirit-name-${slug}` |

The `slug` values are identical (route param matches spirit.slug), enabling browser to animate between elements.

## Decisions Made

- **Wildcard matching:** CSS cannot match partial view-transition-names (no way to target `spirit-image-*`), so we use `*` wildcard which applies to ALL named transitions
- **Animation timing:** 400ms base duration with cubic-bezier for natural feel; 250ms fade with 150ms stagger for crossfade overlap

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - the fix was straightforward and the view-transition-name values already matched correctly.

## Next Phase Readiness

- View transitions now animate smoothly between spirit list and detail pages
- Ready for E2E testing in 02.1-06

---
*Phase: 02.1-spirit-library-polish*
*Completed: 2026-01-25*
