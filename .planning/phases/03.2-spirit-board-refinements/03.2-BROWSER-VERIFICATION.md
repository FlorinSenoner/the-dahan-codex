---
phase: 03.2-spirit-board-refinements
verified: 2026-01-27T21:30:00Z
status: blocked
score: 0/13 user-facing truths verified
server: localhost:3000
blocker: Playwright MCP server not available in verification environment
gaps: []
---

# Phase 3.2: Spirit Board Refinements Browser Verification Report

**Phase Goal:** Address remaining UI/UX issues - minimalist aspect navigation, proper scroll behavior, refined growth panel, and support for complex spirits

**Verified:** 2026-01-27T21:30:00Z
**Status:** BLOCKED
**Server:** http://localhost:3000

## Verification Status

Browser verification could not be completed due to missing Playwright MCP server in the verification environment. However, static code analysis confirms all features are implemented correctly.

**Recommendation:** Manual browser verification required, or run verification from environment with Playwright MCP access.

## User-Facing Truths (Pending Browser Verification)

| # | Truth | Code Evidence | Manual Test Required |
|---|-------|---------------|----------------------|
| 1 | Aspect tabs use flat border indicator (no gradient) | ✓ Confirmed in code | Navigate to /spirits/river-surges-in-sunlight, verify border-b-2 indicator |
| 2 | Tabs scroll behind header when scrolling down | ✓ Confirmed in code | Scroll down on River detail page, verify tabs go behind header (z-10 vs z-20) |
| 3 | Header shows aspect name when tabs scrolled out of view | ✓ Confirmed in code | Scroll until tabs hidden, verify header shows aspect name |
| 4 | Aspect nav bar doesn't render for spirits with 0 aspects | ✓ Confirmed in code | Visit base-only spirit (if any exist), verify no tabs render |
| 5 | Complexity/element pills appear below spirit name (always visible) | ✓ Confirmed in code | Visit any spirit, verify pills outside collapsible |
| 6 | Growth panel shows neutral gray icons with tooltips on hover | ✓ Confirmed in code | Hover over growth icons, verify tooltips appear |
| 7 | Growth cards have equal height (CSS subgrid) | ✓ Confirmed in code | View growth panel, verify all option cards same height |
| 8 | Fractured Days: growth options show "OR" separator | ✓ Confirmed in code | Visit /spirits/fractured-days-split-the-sky, verify "OR" text in growth |
| 9 | Innate powers have left border for speed (amber=Fast, blue=Slow) | ✓ Confirmed in code | View any spirit's innates, verify border-l-4 coloring |
| 10 | Cards section has collapsible "Hand" header with card count | ✓ Confirmed in code | View cards section, verify collapsible trigger with count |
| 11 | Card titles truncate with ellipsis if long | ✓ Confirmed in code | View cards with long names, verify truncate class applied |
| 12 | Starlight has 6 presence tracks with growth unlock indicators | ✓ Confirmed in code | Visit /spirits/starlight-seeks-its-form, verify 6 tracks with Sprout icons |
| 13 | Finder has branching track indicator (GitBranch icon) | ✓ Confirmed in code | Visit /spirits/finder-of-paths-unseen, verify GitBranch icon on tracks |

**Score:** 0/13 truths browser-verified (13/13 confirmed in code)

## Static Code Verification (Completed)

### Truth 1: Flat Border Indicator ✓

**File:** `app/components/spirits/variant-tabs.tsx:36-37`
```typescript
const tabTriggerClassName =
  "min-w-fit min-h-[44px] shrink-0 cursor-pointer rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:text-foreground text-muted-foreground hover:text-foreground transition-colors";
```
**Evidence:** No gradient classes present, uses `border-b-2` with transparent/primary colors only.

### Truth 2: Tabs Scroll Behind Header ✓

**File:** `app/components/spirits/variant-tabs.tsx:52-53`
```typescript
<TabsList
  ref={tabsRef}
  className="sticky top-[57px] z-10 w-full h-auto min-h-[44px] justify-start overflow-x-auto overflow-y-hidden bg-background/95 backdrop-blur border-b border-border rounded-none gap-0"
>
```
**Evidence:** Tabs have `z-10`, header has `z-20` (spirits.$slug.tsx:134), so tabs will scroll behind header.

### Truth 3: Header Shows Aspect Name When Scrolled ✓

**File:** `app/routes/spirits.$slug.tsx:156-160`
```typescript
{showAspectInHeader && (
  <span className="text-xs text-muted-foreground truncate">
    {aspectDisplayName}
  </span>
)}
```
**Evidence:** Header conditionally shows aspect name based on `!tabsVisible` state from useInView hook.

### Truth 4: No Tabs for 0 Aspects ✓

**File:** `app/routes/spirits.$slug.tsx:165-171`
```typescript
{hasAspects && (
  <VariantTabs
    base={base}
    aspects={aspects}
    onVisibilityChange={handleVisibilityChange}
  />
)}
```
**Evidence:** VariantTabs only renders when `hasAspects` (aspects.length > 0) is true.

### Truth 5: Pills Below Name (Always Visible) ✓

**File:** `app/routes/spirits.$slug.tsx:257-277`
```typescript
{/* Pills below name - always visible */}
<div className="flex flex-wrap justify-center gap-2 mt-2 mb-4">
  <Badge variant="outline" className={cn("text-sm", complexityBadgeColors[spirit.complexity] || "")}>
    {spirit.complexity} Complexity
  </Badge>
  {spirit.elements.map((element) => (
    <Badge key={element} variant="outline" className={cn("text-xs", elementBadgeColors[element] || "")}>
      {element}
    </Badge>
  ))}
</div>
```
**Evidence:** Pills rendered outside OverviewSection component (line 286), always visible.

### Truth 6: Growth Icons with Tooltips ✓

**File:** `app/components/spirits/growth-panel.tsx:116-130`
```typescript
<Tooltip delayDuration={100}>
  <TooltipTrigger asChild>
    <div className="flex items-center gap-1 cursor-default">
      {Icon && (
        <Icon size={32} className="text-muted-foreground shrink-0" />
      )}
      {modifier && (
        <span className="text-sm font-medium text-muted-foreground">
          {modifier}
        </span>
      )}
    </div>
  </TooltipTrigger>
  <TooltipContent>{description}</TooltipContent>
</Tooltip>
```
**Evidence:** Icons use neutral `text-muted-foreground` color, wrapped in Tooltip component.

### Truth 7: Equal Height Growth Cards (Subgrid) ✓

**File:** `app/components/spirits/growth-panel.tsx:231-234`
```typescript
<div className="grid grid-cols-1 sm:grid-cols-3 gap-3 grid-rows-[repeat(2,auto)]">
  {options.map((option) => (
    <GrowthOptionCard key={option.id} option={option} />
  ))}
</div>
```

**File:** `app/components/spirits/growth-panel.tsx:167`
```typescript
<div className="row-span-2 grid grid-rows-subgrid gap-2 bg-muted/30 rounded-lg p-3 group relative">
```
**Evidence:** Parent defines `grid-rows-[repeat(2,auto)]`, children use `grid-rows-subgrid` for equal heights.

### Truth 8: Fractured Days OR Separator ✓

**File:** `app/components/spirits/growth-panel.tsx:137-159`
```typescript
function OrActionsGroup({ orActions }: { orActions: OrActionOption[] }) {
  return (
    <div className="flex flex-wrap items-center gap-2">
      {orActions.map((orOption, idx) => (
        <div key={orOption.label} className="flex items-center gap-2">
          {idx > 0 && (
            <span className="text-xs font-semibold text-amber-500 uppercase">
              or
            </span>
          )}
          <div className="flex items-center gap-1.5 px-2 py-1 rounded-md bg-background/50 border border-border/50">
            ...
          </div>
        </div>
      ))}
    </div>
  );
}
```
**Evidence:** OrActionsGroup renders "or" text separator between options, used when `option.orActions` exists.

### Truth 9: Innate Powers Border Speed ✓

**File:** `app/components/spirits/innate-powers.tsx:113-118`
```typescript
<div
  key={innate.name}
  className={cn(
    "border-l-4 pl-3 py-2 rounded-r-lg bg-muted/20",
    innate.speed === "Fast" ? "border-l-amber-500" : "border-l-blue-500",
  )}
>
```
**Evidence:** Uses `border-l-4` with amber (Fast) or blue (Slow) color, no badge text.

### Truth 10: Collapsible Hand with Count ✓

**File:** `app/components/spirits/card-hand.tsx:88-95`
```typescript
<Collapsible defaultOpen>
  <CollapsibleTrigger className="flex items-center gap-2 w-full py-2 cursor-pointer">
    <ChevronDown className="w-4 h-4 transition-transform duration-200 data-[state=closed]:-rotate-90" />
    <span className="font-medium">Hand</span>
    <span className="text-xs text-muted-foreground">
      ({handCards.length})
    </span>
  </CollapsibleTrigger>
```
**Evidence:** Collapsible trigger shows "Hand" label with card count in parentheses.

### Truth 11: Card Title Truncation ✓

**File:** `app/components/spirits/card-hand.tsx:33-37`
```typescript
<h4
  className="text-sm font-medium leading-tight truncate"
  title={power.name}
>
  {power.name}
</h4>
```
**Evidence:** Card titles use `truncate` class with `title` attribute for full name on hover.

### Truth 12: Starlight 6 Tracks with Unlock Indicators ✓

**File:** `app/components/spirits/presence-track.tsx:108-115`
```typescript
{/* Unlocks growth indicator (Starlight) */}
{track.unlocksGrowth && (
  <span
    className="text-emerald-400"
    title="Unlocks growth options when emptied"
  >
    <Sprout className="w-3.5 h-3.5" />
  </span>
)}
```
**Evidence:** Sprout icon renders when `track.unlocksGrowth` is true.

**Seed Data:** `convex/seed.ts` contains Starlight with 6 tracks (lines 655-873, 1938-2156).

### Truth 13: Finder Branching Indicator ✓

**File:** `app/components/spirits/presence-track.tsx:99-106`
```typescript
{/* Branching track indicator (Finder) */}
{track.connectsTo && (
  <span
    className="text-muted-foreground"
    title={`Connects to ${track.connectsTo} track`}
  >
    <GitBranch className="w-3.5 h-3.5" />
  </span>
)}
```
**Evidence:** GitBranch icon renders when `track.connectsTo` property exists.

**Seed Data:** `convex/seed.ts` contains Finder (lines 876-1068, 2158-2348).

## Skipped Truths

None. All truths are user-facing and require browser verification to confirm visual rendering.

## Manual Verification Checklist

To complete browser verification, manually test the following:

### Test 1: Minimalist Tabs (Truths 1-4)

1. Navigate to http://localhost:3000/spirits
2. Click "River Surges in Sunlight" (has aspects)
3. Verify:
   - [ ] Active tab has flat border-b-2 indicator (no gradient background)
   - [ ] Tab bar is sticky at top-[57px]
4. Scroll down the page
5. Verify:
   - [ ] Tabs scroll behind the header (not visible over header)
   - [ ] Header shows current aspect name when tabs are hidden
6. Navigate to a base-only spirit (no aspects)
7. Verify:
   - [ ] No aspect tabs render at all

### Test 2: Pills and Layout (Truth 5)

1. Visit any spirit detail page
2. Verify:
   - [ ] Complexity badge and element pills appear directly below spirit name
   - [ ] Pills are always visible (not inside collapsible section)
   - [ ] Description text is inside the collapsible Overview section

### Test 3: Growth Panel (Truths 6-8)

1. Visit any spirit with growth data
2. Verify:
   - [ ] Growth action icons are neutral gray (`text-muted-foreground`)
   - [ ] Hovering over icons shows tooltip with action description
3. Resize window to different widths
4. Verify:
   - [ ] All growth option cards have equal height (subgrid working)
5. Navigate to http://localhost:3000/spirits/fractured-days-split-the-sky
6. Verify:
   - [ ] Growth options with OR choices show amber "OR" text separator

### Test 4: Innate Powers (Truth 9)

1. Visit any spirit with innate powers
2. Verify:
   - [ ] Each innate has left border (border-l-4)
   - [ ] Fast innates have amber border, Slow innates have blue border
   - [ ] No speed badge text appears

### Test 5: Cards Section (Truths 10-11)

1. Visit any spirit with unique powers
2. Verify:
   - [ ] "Hand" section has collapsible trigger with ChevronDown icon
   - [ ] Card count appears next to "Hand" label (e.g., "(4)")
3. Find a card with a long name
4. Verify:
   - [ ] Title truncates with ellipsis
   - [ ] Hovering shows full title in browser tooltip (title attribute)

### Test 6: Complex Spirits (Truths 12-13)

1. Navigate to http://localhost:3000/spirits/starlight-seeks-its-form
2. Verify:
   - [ ] Exactly 6 presence tracks render
   - [ ] Tracks with growth unlocks show green Sprout icon
3. Navigate to http://localhost:3000/spirits/finder-of-paths-unseen
4. Verify:
   - [ ] Tracks with connections show GitBranch icon
   - [ ] Icon appears next to track label

## Gaps Summary

**No gaps found in static code analysis.** All 13 truths are implemented correctly in the codebase.

Browser verification is required to confirm:
- Visual rendering matches expectations
- Interactive behaviors (hover, scroll, collapse) work correctly
- Responsive layouts function on mobile/desktop
- Complex spirit data displays properly

## Blocker Details

**Blocker:** Playwright MCP server not available in verification environment

**Impact:** Cannot perform automated browser verification via Playwright

**Workaround:** Manual browser verification using checklist above

**Next Steps:**
1. Run manual verification checklist
2. Document any visual issues found
3. If issues found, create gap report with screenshots
4. If all tests pass, update this report with `status: passed`

---

_Verified: 2026-01-27T21:30:00Z_
_Verifier: Claude (gsd-browser-verifier)_
_Server: localhost:3000_
_Status: BLOCKED (Playwright MCP unavailable)_
_Static Analysis: COMPLETE (13/13 truths confirmed in code)_
_Browser Testing: PENDING (requires manual verification)_
