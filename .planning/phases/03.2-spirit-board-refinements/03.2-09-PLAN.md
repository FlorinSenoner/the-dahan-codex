---
phase: 03.2-spirit-board-refinements
plan: 09
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/spirits/card-hand.tsx
  - app/components/spirits/innate-powers.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Cards and Innate Powers use full border (not just left border)"
    - "Border color indicates speed (amber=Fast, blue=Slow)"
    - "Hover changes border prominence and adds subtle background tint"
    - "Innate powers are collapsible and collapsed by default"
    - "Cards Hand accordion matches Overview styling"
  artifacts:
    - path: "app/components/spirits/card-hand.tsx"
      provides: "Full border with hover effects, matching Overview accordion style"
    - path: "app/components/spirits/innate-powers.tsx"
      provides: "Full border with hover effects and collapsible innate cards"
  key_links:
    - from: "card-hand.tsx"
      to: "PowerCard border styling"
      via: "border hover:border-{color}-400 hover:bg-{color}-500/10"
      pattern: "border-amber|border-blue"
    - from: "innate-powers.tsx"
      to: "Collapsible"
      via: "defaultOpen={false}"
      pattern: "Collapsible"
---

<objective>
Rework cards and innate powers: full border (not border-l-4), hover effects, collapsible innates, consistent accordion styling.

Purpose: UAT tests 11, 12, 13 requested: consistent styling with full thin border, hover effects that highlight border and add subtle tint, collapsible innate powers (collapsed by default), and matching Overview accordion style for Hand section.
Output: Cards and innate powers with thin modern border all around, hover effects, collapsible innate section, matching accordion styles.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/components/spirits/card-hand.tsx
@app/components/spirits/innate-powers.tsx
@app/components/spirits/overview-section.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update cards to use full border with hover effects and matching accordion</name>
  <files>app/components/spirits/card-hand.tsx</files>
  <action>
Two changes needed in card-hand.tsx:

**1. Update PowerCard border styling** (lines 21-29):

```tsx
// BEFORE
<div
  className={cn(
    "p-3 rounded-lg min-w-0",
    // Border-only speed indicator (left border)
    "border-l-4",
    power.speed === "Fast"
      ? "border-l-amber-500 bg-muted/30"
      : "border-l-blue-500 bg-muted/30",
  )}
>

// AFTER
<div
  className={cn(
    "p-3 rounded-lg min-w-0 transition-colors",
    // Full border with speed-based color and hover effects
    "border",
    power.speed === "Fast"
      ? "border-amber-500/50 hover:border-amber-400 hover:bg-amber-500/10"
      : "border-blue-500/50 hover:border-blue-400 hover:bg-blue-500/10",
  )}
>
```

**2. Match Hand accordion to Overview styling** (lines 89-95):

Reference implementation from overview-section.tsx line 90:
```tsx
<CollapsibleTrigger className="w-full flex justify-between items-center py-3 px-4 bg-muted/30 rounded-lg cursor-pointer min-h-[44px]">
```

```tsx
// BEFORE
<CollapsibleTrigger className="flex items-center gap-2 w-full py-2 cursor-pointer">
  <ChevronDown className="w-4 h-4 transition-transform duration-200 data-[state=closed]:-rotate-90" />
  <span className="font-medium">Hand</span>
  <span className="text-xs text-muted-foreground">
    ({handCards.length})
  </span>
</CollapsibleTrigger>

// AFTER (matching Overview style)
<CollapsibleTrigger className="w-full flex justify-between items-center py-3 px-4 bg-muted/30 rounded-lg cursor-pointer min-h-[44px]">
  <div className="flex items-center gap-2">
    <span className="font-medium">Hand</span>
    <span className="text-xs text-muted-foreground">
      ({handCards.length})
    </span>
  </div>
  <ChevronDown className="h-4 w-4 transition-transform duration-200 data-[state=open]:rotate-180" />
</CollapsibleTrigger>
```

Key changes:
- Added `py-3 px-4 bg-muted/30 rounded-lg` to match Overview
- Changed to `justify-between` with chevron on right
- Changed chevron rotation to `data-[state=open]:rotate-180` (not `data-[state=closed]:-rotate-90`)
- Wrapped text in div for proper flex layout
  </action>
  <verify>
Run `pnpm typecheck` - no errors.
Visit River spirit page, verify:
- Cards have thin border all around (not just left)
- Fast cards have amber border, Slow cards have blue border
- Hover makes border more prominent and adds subtle background tint
- Hand accordion trigger matches Overview trigger styling (bg-muted/30 rounded-lg, chevron on right)
  </verify>
  <done>
Power cards display with full border, speed-based colors, hover effects. Hand accordion matches Overview styling.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update innate powers with full border, hover, and collapsible</name>
  <files>app/components/spirits/innate-powers.tsx</files>
  <action>
Three changes needed in innate-powers.tsx:

**1. Import Collapsible components** at top of file:
```tsx
import { ChevronDown } from "lucide-react";
import {
  Collapsible,
  CollapsibleContent,
  CollapsibleTrigger,
} from "@/components/ui/collapsible";
```

**2. Replace the innate card rendering** (lines 110-145):

The current code uses `border-l-4 pl-3 py-2 rounded-r-lg`. Replace with full border and collapsible:

```tsx
// BEFORE
<div className="space-y-4">
  {innates.map((innate) => (
    <div
      key={innate.name}
      className={cn(
        "border-l-4 pl-3 py-2 rounded-r-lg bg-muted/20",
        innate.speed === "Fast"
          ? "border-l-amber-500"
          : "border-l-blue-500",
      )}
    >
      <PowerHeader ... />
      <div className="mt-3 space-y-2">
        {innate.thresholds.map(...)}
      </div>
    </div>
  ))}
</div>

// AFTER
<div className="space-y-4">
  {innates.map((innate) => (
    <Collapsible key={innate.name} defaultOpen={false}>
      <div
        className={cn(
          "border rounded-lg transition-colors",
          innate.speed === "Fast"
            ? "border-amber-500/50 hover:border-amber-400 hover:bg-amber-500/10"
            : "border-blue-500/50 hover:border-blue-400 hover:bg-blue-500/10",
        )}
      >
        <CollapsibleTrigger className="w-full p-3 flex justify-between items-center cursor-pointer min-h-[44px]">
          <PowerHeader
            name={innate.name}
            range={innate.range}
            target={innate.target}
          />
          <ChevronDown className="h-4 w-4 shrink-0 transition-transform duration-200 data-[state=open]:rotate-180" />
        </CollapsibleTrigger>
        <CollapsibleContent>
          <div className="px-3 pb-3 space-y-2">
            {innate.thresholds.map((threshold, idx) => (
              <div
                key={getThresholdKey(threshold.elements)}
                className={cn(
                  "py-1.5",
                  idx > 0 && "border-t border-border/30",
                )}
              >
                <ElementThreshold
                  elements={threshold.elements}
                  effect={threshold.effect}
                />
              </div>
            ))}
          </div>
        </CollapsibleContent>
      </div>
    </Collapsible>
  ))}
</div>
```

Key changes:
- Wrap each innate in `Collapsible` with `defaultOpen={false}`
- Change `border-l-4 pl-3 py-2 rounded-r-lg` to `border rounded-lg`
- Add hover effects: `hover:border-{color}-400 hover:bg-{color}-500/10`
- Add `transition-colors` for smooth hover
- Move PowerHeader into CollapsibleTrigger
- Add chevron icon on right side
- Move thresholds into CollapsibleContent with adjusted padding
  </action>
  <verify>
Run `pnpm typecheck` - no errors.
Visit River spirit page, verify:
- Innate powers have thin border all around (not just left)
- Fast innates have amber border, Slow innates have blue border
- Hover makes border more prominent and adds subtle background tint
- Innate powers are collapsed by default
- Clicking expands to show thresholds
- Chevron rotates on expand
  </verify>
  <done>
Innate powers display with full border, speed-based colors, hover effects, and are collapsible (collapsed by default).
  </done>
</task>

</tasks>

<verification>
- [ ] `pnpm typecheck` passes
- [ ] Cards have full border (not border-l-4)
- [ ] Innate powers have full border (not border-l-4)
- [ ] Fast speed = amber border, Slow = blue border
- [ ] Hover increases border prominence and adds subtle tint
- [ ] Innate powers collapsed by default
- [ ] Clicking innate power expands thresholds
- [ ] Hand accordion trigger matches Overview trigger styling
</verification>

<success_criteria>
1. Cards and innate powers share consistent full border styling
2. Speed indicated by border color (amber=Fast, blue=Slow)
3. Hover effects on both cards and innates
4. Innate powers collapsible and collapsed by default
5. Hand accordion matches Overview styling
6. No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/03.2-spirit-board-refinements/03.2-09-SUMMARY.md`
</output>
