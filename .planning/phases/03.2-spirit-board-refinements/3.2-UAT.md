---
status: diagnosed
phase: 03.2-spirit-board-refinements
source:
  03.2-01-SUMMARY.md, 03.2-02-SUMMARY.md, 03.2-03-SUMMARY.md,
  03.2-04-SUMMARY.md, 03.2-05-SUMMARY.md, 03.2-06-SUMMARY.md
started: 2026-01-27T00:00:00Z
updated: 2026-01-27T01:30:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Minimalist Tab Styling

expected: Visit a spirit with aspects (e.g., River Surges in Sunlight). Active
tab has flat border-b-2 underline, no gradient background. result: pass

### 2. Scroll-Aware Header Aspect Name

expected: On a spirit detail page with aspects, scroll down past the tabs. The
sticky header should show the current aspect name as a subtitle when the tabs
are no longer visible. result: issue reported: "this works, but the tabs still
scroll on top of the header with the spirit name. make it scroll behind. e.g.
position: relative with z-index 0 would do the trick" severity: minor

### 3. Conditional Tab Rendering

expected: Visit a spirit WITHOUT aspects (e.g., one of the new complex spirits
like Fractured Days). No variant tabs should appear since there are no aspects
to switch between. result: skipped reason: Complex spirits not seeded yet - need
to run npx convex run seed:reseedSpirits

### 4. Pills Below Spirit Name

expected: On any spirit detail page, complexity badge (e.g., "Moderate") and
element badges (Sun, Water, etc.) appear directly below the spirit name, always
visible (not hidden in collapsible). result: pass

### 5. Description in Collapsible Overview

expected: Spirit description text appears inside the collapsible "Overview"
section, not floating above. Expand Overview to see complexity,
strengths/weaknesses, and the description. result: pass

### 6. Growth Panel CSS Subgrid Equal Heights

expected: Visit River Surges in Sunlight. Growth options (G1, G2) display as
cards with equal heights, properly aligned even if they have different amounts
of content. result: issue reported: "you only used the subgrid to render the
hidden g1, g2, g3 - revealed on hover. this is not ideal revert to how g1, g2,
g3 was displayed before. this just makes the grow option unnccessarilly tall and
there is too much whie space. (remove the subgrid if not needed)" severity:
major

### 7. Growth Panel Tooltips

expected: Hover over a growth action icon (e.g., +1 Energy, Gain Card). A
tooltip should appear showing the full action description. result: issue
reported: "this works but would be nice if there was a small hover effect on the
card and the action (e.g slight background change on the card - as in other
places, and slight color change on the action)" severity: cosmetic

### 8. Growth Panel Neutral Icons

expected: Growth action icons use neutral gray color (text-muted-foreground),
not element-specific colors. result: pass

### 9. G1/G2/G3 Labels on Hover

expected: Growth option labels (G1, G2, G3) are hidden by default but appear
when hovering over the growth panel cards. result: issue reported: "the hover
should not appear on the top right of the card. add a slight frosty blur effect
on the card so the g1, g2, g3 is readable" severity: cosmetic

### 10. Spirit-Specific Presence Track Colors

expected: River's presence tracks use cyan/amber gradient. Lightning's use
orange/violet. Each spirit has its own identity colors derived from
primary/secondary elements. result: issue
reported: "nope. you might want to check the data in convex and verify it has the correct values"
severity: major

### 11. Collapsible Cards Section with Count Badge

expected: Cards section shows "Hand" with a count badge (e.g., "Hand (4)"). The
section is collapsible. Cards display in a grid layout (2 columns on desktop).
result: issue
reported: "for the accordion use the same component as used for the overview. remember: no duplication when it comes to component with the same behaviour"
severity: minor

### 12. Card Speed Border-Only Indicator

expected: Power cards show Fast/Slow via left border color only (amber=Fast,
blue=Slow). No text badge saying "Fast" or "Slow". result: issue
reported: "this needs re-work. the cards and Innate Powers should follow the same styling. the border should not only be on the left but rather all around (thin modern border look). then on hover make sure that the border color becomes a bit more prominent and the cord becomes a slight blue/red color based on the speed of the card. also the card of the innate power needs to be collapsable and is collapsed by default"
severity: major

### 13. Innate Powers Border-Only Speed

expected: Innate powers use border-l-4 for speed indication (amber=Fast,
blue=Slow), matching the card styling. No Fast/Slow badge text. result: issue
reported: "covered by test 12 feedback - same styling rework needed"
severity: major

### 14. Innate Powers Single-Line Threshold Layout

expected: Each innate threshold level shows element icons and effect text on the
same line (with wrapping if needed), not stacked vertically. result: pass

### 15. Fractured Days Renders Correctly

expected: Navigate to Fractured Days Split the Sky
(/spirits/fractured-days-split-the-sky). Spirit loads with growth panel showing
OR-style choices (choose from multiple options). result: skipped
reason: No data seeded - need to get data from wiki links and run seed

### 16. Starlight Renders Correctly

expected: Navigate to Starlight Seeks Its Form
(/spirits/starlight-seeks-its-form). Spirit loads with 6 presence tracks showing
growth unlock indicators. result: skipped
reason: No data seeded - same as test 15

### 17. Finder Renders Correctly

expected: Navigate to Finder of Paths Unseen (/spirits/finder-of-paths-unseen).
Spirit loads with presence tracks showing connection indicators (branching
icon). result: skipped
reason: No data seeded - same as test 15

### 18. Serpent Renders Correctly

expected: Navigate to Serpent Slumbering Beneath the Island
(/spirits/serpent-slumbering-beneath-the-island). Spirit loads with Deep Slumber
presence track showing presence cap values. result: skipped
reason: No data seeded - same as test 15

## Summary

total: 18
passed: 5
issues: 9
pending: 0
skipped: 4

## Gaps

- truth: "Tabs scroll behind header, not on top of it"
  status: failed
  reason: "User reported: this works, but the tabs still scroll on top of the header with the spirit name. make it scroll behind. e.g. position: relative with z-index 0 would do the trick"
  severity: minor
  test: 2
  root_cause: "TabsList has z-10 but needs relative z-0 to stack below the sticky header"
  artifacts:
    - path: "app/components/spirits/variant-tabs.tsx"
      issue: "TabsList className has z-10, should be relative z-0"
  missing:
    - "Change z-10 to relative z-0 on TabsList"

- truth: "Growth panel layout is compact without excessive whitespace"
  status: failed
  reason: "User reported: you only used the subgrid to render the hidden g1, g2, g3 - revealed on hover. this is not ideal revert to how g1, g2, g3 was displayed before. this just makes the grow option unnccessarilly tall and there is too much white space. (remove the subgrid if not needed)"
  severity: major
  test: 6
  root_cause: "row-span-2 + grid-rows-subgrid creates extra vertical space for G1/G2/G3 labels that adds unnecessary height"
  artifacts:
    - path: "app/components/spirits/growth-panel.tsx"
      issue: "GrowthOptionCard uses row-span-2 grid-rows-subgrid causing extra whitespace"
  missing:
    - "Remove subgrid layout, revert to simpler card structure"
    - "Show G1/G2/G3 labels inline at top of card (not hover-reveal)"

- truth: "Growth panel has hover effects on cards and actions"
  status: failed
  reason: "User reported: this works but would be nice if there was a small hover effect on the card and the action (e.g slight background change on the card - as in other places, and slight color change on the action)"
  severity: cosmetic
  test: 7
  root_cause: "GrowthOptionCard lacks hover:bg-muted/50 and action icons lack hover color transition"
  artifacts:
    - path: "app/components/spirits/growth-panel.tsx"
      issue: "Missing hover styles on card and action icons"
  missing:
    - "Add hover:bg-muted/50 transition-colors to card"
    - "Add hover:text-foreground to action icons"

- truth: "G1/G2/G3 labels appear with proper styling"
  status: failed
  reason: "User reported: the hover should not appear on the top right of the card. add a slight frosty blur effect on the card so the g1, g2, g3 is readable"
  severity: cosmetic
  test: 9
  root_cause: "G1/G2/G3 labels use opacity transition in awkward position; need frosty blur overlay instead"
  artifacts:
    - path: "app/components/spirits/growth-panel.tsx"
      issue: "Labels positioned awkwardly with opacity-0 group-hover pattern"
  missing:
    - "Move G1/G2/G3 to top-left corner with subtle background"
    - "Add backdrop-blur-sm for frosty effect on hover"

- truth: "Spirit-specific presence track colors (cyan/amber for River, orange/violet for Lightning)"
  status: failed
  reason: "User reported: nope. you might want to check the data in convex and verify it has the correct values"
  severity: major
  test: 10
  root_cause: "PresenceSlot trackColor type restricts to 4 colors (amber|blue|purple|emerald) but spirit colors include cyan, orange, violet, etc. Type cast truncates values"
  artifacts:
    - path: "app/components/spirits/presence-track.tsx"
      issue: "Line 128 casts color to limited union type, losing spirit-specific colors"
    - path: "app/components/spirits/presence-slot.tsx"
      issue: "trackColor prop type too restrictive"
  missing:
    - "Expand PresenceSlot trackColor type to include all spirit colors"
    - "Remove restrictive type cast in presence-track.tsx"

- truth: "Cards section uses same accordion component as Overview"
  status: failed
  reason: "User reported: for the accordion use the same component as used for the overview. remember: no duplication when it comes to component with the same behaviour"
  severity: minor
  test: 11
  root_cause: "Cards CollapsibleTrigger uses inline flex style while Overview uses full-width bg-muted/30 rounded-lg style"
  artifacts:
    - path: "app/components/spirits/card-hand.tsx"
      issue: "Different CollapsibleTrigger style than overview-section.tsx"
    - path: "app/components/spirits/overview-section.tsx"
      issue: "Reference implementation for consistent collapsible style"
  missing:
    - "Extract shared CollapsibleSection component or match Overview styling"

- truth: "Cards and Innate Powers use consistent speed-based styling with border all around"
  status: failed
  reason: "User reported: this needs re-work. the cards and Innate Powers should follow the same styling. the border should not only be on the left but rather all around (thin modern border look). then on hover make sure that the border color becomes a bit more prominent and the card becomes a slight blue/red color based on the speed of the card. also the card of the innate power needs to be collapsable and is collapsed by default"
  severity: major
  test: 12
  root_cause: "Both use border-l-4 instead of full border. No hover effects. Innates not collapsible."
  artifacts:
    - path: "app/components/spirits/card-hand.tsx"
      issue: "Uses border-l-4, needs border all around with hover effects"
    - path: "app/components/spirits/innate-powers.tsx"
      issue: "Uses border-l-4, not collapsible, needs same styling as cards"
  missing:
    - "Change border-l-4 to border with speed-based color"
    - "Add hover:border-{speed-color}-400 and hover:bg-{speed-color}-500/10"
    - "Make innate powers section collapsible (collapsed by default)"
    - "Extract shared PowerCard component for consistency"

- truth: "Complex spirits (Fractured Days, Starlight, Finder, Serpent) data seeded in Convex"
  status: failed
  reason: "User reported: can't be tested as there is no data. make sure to get it from the wiki links that I passed you"
  severity: blocker
  test: 15
  root_cause: "Seed data exists in convex/seed.ts but reseedSpirits mutation was never run against the database"
  artifacts:
    - path: "convex/seed.ts"
      issue: "Data exists but needs to be deployed/run"
  missing:
    - "Run npx convex run seed:reseedSpirits to populate database"
