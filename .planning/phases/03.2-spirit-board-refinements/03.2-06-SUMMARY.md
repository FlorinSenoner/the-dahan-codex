---
phase: 03.2-spirit-board-refinements
plan: 06
subsystem: database
tags: [convex, seed-data, spirit-island, complex-spirits]

# Dependency graph
requires:
  - phase: 03.2-01
    provides: Schema extensions (orActions, connectsTo, unlocksGrowth, presenceCap)
  - phase: 03.2-03
    provides: Growth panel CSS subgrid support
  - phase: 03.2-04
    provides: Presence track spirit-specific colors
provides:
  - Complete seed data for Fractured Days Split the Sky
  - Complete seed data for Starlight Seeks Its Form
  - Complete seed data for Finder of Paths Unseen
  - Complete seed data for Serpent Slumbering Beneath the Island
  - Demonstration of all advanced schema extension patterns
affects: [future-spirits, ui-rendering, opening-scrubber]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - orActions pattern for choose-from-multiple growth options
    - unlocksGrowth flag for Starlight-style multi-track presence
    - connectsTo/connectionPoint for Finder-style branching tracks
    - presenceCap for Serpent-style presence limit tracking

key-files:
  created: []
  modified:
    - convex/seed.ts

key-decisions:
  - "Used orActions with empty actions array for Fractured Days (all options are OR choices)"
  - "Starlight has 6 tracks with 4 marked as unlocksGrowth: true"
  - "Finder's energy track connectsTo cardPlays at connectionPoint 3"
  - "Serpent's Deep Slumber track uses presenceCap values 5-13"
  - "All complex spirits added to both seedSpirits and reseedSpirits mutations"

patterns-established:
  - "Complex growth: use orActions for 'A OR B' style choices, empty actions array when only orActions exist"
  - "Multi-track spirits: use layout: 'multiple' with unlocksGrowth on tracks that reveal growth choices"
  - "Branching tracks: use layout: 'branching' with connectsTo and connectionPoint"
  - "Presence limit tracks: use type: 'presenceLimit' with presenceCap in slot objects"

# Metrics
duration: 5min
completed: 2026-01-27
---

# Phase 3.2 Plan 6: Complex Spirits Seed Data Summary

**Four Very High complexity spirits demonstrating all schema extensions: orActions growth (Fractured Days), multi-track presence (Starlight), branching tracks (Finder), and presence limits (Serpent)**

## Performance

- **Duration:** 5 min
- **Started:** 2026-01-26T23:37:52Z
- **Completed:** 2026-01-26T23:43:07Z
- **Tasks:** 3
- **Files modified:** 1

## Accomplishments
- Added Fractured Days Split the Sky with choose-from-four growth using orActions pattern
- Added Starlight Seeks Its Form with 6 presence tracks and unlocksGrowth indicators
- Added Finder of Paths Unseen with branching track connections (connectsTo/connectionPoint)
- Added Serpent Slumbering Beneath the Island with Deep Slumber presenceCap track
- All 4 spirits have complete board data: growth, innates, unique powers, special rules
- Both seedSpirits and reseedSpirits mutations updated consistently

## Task Commits

Each task was committed atomically:

1. **Task 1: Add Fractured Days Split the Sky seed data** - `134189e` (feat)
2. **Task 2: Add Starlight, Finder, and Serpent seed data** - `435b987` (feat)
3. **Task 3: Deploy seed data and verify rendering** - No commit (verification only - typecheck passed)

## Files Created/Modified
- `convex/seed.ts` - Added 4 complex spirits to both seed mutations (2000+ lines added)

## Decisions Made
- **orActions with empty actions:** Fractured Days' growth options only have OR choices, so actions array is empty and all content is in orActions
- **Element tracks for Starlight:** Created element-based tracks (Fire/Air, Water/Earth, Moon/Plant, Sun/Animal) to represent Starlight's unique 6-track presence
- **Finder track connection:** Energy track connects to Card Plays at slot 3, representing the branching point
- **Serpent presence cap range:** Deep Slumber track uses presenceCap 5-13, matching game data

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - schema extensions from 03.2-01 were complete and properly typed.

## User Setup Required

**Manual verification needed:** After running `npx convex run seed:reseedSpirits`, verify in browser:
1. Navigate to /spirits and confirm 4 new spirits appear in list
2. Click each spirit to verify detail page renders:
   - Fractured Days: Growth panel shows OR options
   - Starlight: Presence shows 6 tracks with growth unlock indicators
   - Finder: Presence shows connection indicators between tracks
   - Serpent: Presence shows Deep Slumber limit track

## Next Phase Readiness
- All schema extensions validated with real data
- Complex spirit patterns ready for UI testing
- Phase 3.2 complete - ready for UAT and next phase planning

---
*Phase: 03.2-spirit-board-refinements*
*Completed: 2026-01-27*
