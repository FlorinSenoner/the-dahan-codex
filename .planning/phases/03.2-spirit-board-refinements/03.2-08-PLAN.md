---
phase: 03.2-spirit-board-refinements
plan: 08
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/spirits/growth-panel.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Growth panel layout is compact without excessive whitespace"
    - "G1/G2/G3 labels visible inline at top-left of card with frosty blur"
    - "Growth cards have subtle hover effect"
    - "Action icons have hover color transition"
  artifacts:
    - path: "app/components/spirits/growth-panel.tsx"
      provides: "Simplified layout without subgrid, inline labels with backdrop-blur"
  key_links:
    - from: "growth-panel.tsx"
      to: "GrowthOptionCard"
      via: "hover:bg-muted/50 transition-colors"
      pattern: "hover:bg-muted"
---

<objective>
Simplify growth panel layout by removing subgrid, showing G1/G2/G3 inline with frosty blur, and adding hover effects.

Purpose: UAT tests 6, 7, 9 reported: subgrid causing excessive whitespace, missing hover effects, and awkward G1/G2/G3 label positioning in bottom right with opacity transition.
Output: Compact growth cards with inline labels at top-left, frosty blur background, hover effects on cards and action icons.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/components/spirits/growth-panel.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove subgrid and add inline G1/G2/G3 labels with hover effects</name>
  <files>app/components/spirits/growth-panel.tsx</files>
  <action>
Rewrite GrowthOptionCard component (around line 165):

**Current problematic code:**
```tsx
function GrowthOptionCard({ option }: { option: GrowthOption }) {
  return (
    <div className="row-span-2 grid grid-rows-subgrid gap-2 bg-muted/30 rounded-lg p-3 group relative">
      {/* ... */}
      {/* Row 2: Option ID (hover reveal) */}
      <div className="text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity">
        {option.id}
      </div>
    </div>
  );
}
```

**Replace with:**
```tsx
function GrowthOptionCard({ option }: { option: GrowthOption }) {
  return (
    <div className="bg-muted/30 rounded-lg p-3 relative hover:bg-muted/50 transition-colors">
      {/* Cost badge if present */}
      {option.cost !== undefined && option.cost > 0 && (
        <div className="absolute -top-2 -right-2 z-10">
          <Badge
            variant="outline"
            className="text-xs text-amber-400 border-amber-400/50"
          >
            {option.cost} Energy
          </Badge>
        </div>
      )}

      {/* Actions row with inline G1/G2/G3 label */}
      <div className="flex flex-wrap items-center gap-3">
        {/* G1/G2/G3 label with frosty blur effect */}
        <span className="text-xs font-semibold text-muted-foreground bg-muted/50 backdrop-blur-sm px-2 py-0.5 rounded">
          {option.id}
        </span>

        {/* Repeat badge if present */}
        {option.repeat && option.repeat > 1 && (
          <Badge variant="secondary" className="text-xs">
            x{option.repeat}
          </Badge>
        )}

        {/* Regular actions */}
        {option.actions.map((action, idx) => {
          const actionKey = `${option.id}-${action.type}-${idx}`;
          return <GrowthActionIcon key={actionKey} action={action} />;
        })}

        {/* Or actions for complex spirits */}
        {option.orActions && option.orActions.length > 0 && (
          <OrActionsGroup orActions={option.orActions} />
        )}
      </div>
    </div>
  );
}
```

**Key changes:**
1. Remove `row-span-2 grid grid-rows-subgrid gap-2` - causes extra vertical space
2. Remove `group` class - no longer needed for hover reveal
3. Add `hover:bg-muted/50 transition-colors` for card hover effect
4. Move G1/G2/G3 label inline at start of flex row with `bg-muted/50 backdrop-blur-sm` for frosty effect
5. Delete the entire "Row 2: Option ID (hover reveal)" div

**Also update the grid container** in GrowthPanelContent (line ~231):
```tsx
// BEFORE
<div className="grid grid-cols-1 sm:grid-cols-3 gap-3 grid-rows-[repeat(2,auto)]">

// AFTER
<div className="grid grid-cols-1 sm:grid-cols-3 gap-3">
```

**Add hover effect to action icons** in GrowthActionIcon (line ~120):
```tsx
// BEFORE
<Icon size={32} className="text-muted-foreground shrink-0" />

// AFTER
<Icon size={32} className="text-muted-foreground hover:text-foreground transition-colors shrink-0" />
```
  </action>
  <verify>
Run `pnpm typecheck` - no errors.
Visit River spirit page, verify:
- Growth cards are compact without excessive whitespace
- G1/G2/G3 labels visible at start of each card (always visible, not on hover)
- Labels have subtle frosted background (backdrop-blur-sm)
- Cards change background on hover
- Action icons change color to foreground on hover
  </verify>
  <done>
Growth panel displays compact cards with inline G1/G2/G3 labels, frosty blur effect, and hover states on both cards and action icons.
  </done>
</task>

</tasks>

<verification>
- [ ] `pnpm typecheck` passes
- [ ] No `row-span-2 grid-rows-subgrid` in GrowthOptionCard
- [ ] No `grid-rows-[repeat(2,auto)]` in grid container
- [ ] G1/G2/G3 labels inline with `backdrop-blur-sm`
- [ ] Cards have `hover:bg-muted/50 transition-colors`
- [ ] Action icons have `hover:text-foreground transition-colors`
- [ ] Growth cards display without excessive vertical whitespace
</verification>

<success_criteria>
1. Growth panel layout is compact and efficient
2. G1/G2/G3 labels always visible with frosty blur at top-left
3. Hover effects on cards and action icons
4. No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/03.2-spirit-board-refinements/03.2-08-SUMMARY.md`
</output>
