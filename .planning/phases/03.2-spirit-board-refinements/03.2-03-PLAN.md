---
phase: 03.2-spirit-board-refinements
plan: 03
type: execute
wave: 2
depends_on: ["03.2-01"]
files_modified:
  - app/components/spirits/growth-panel.tsx
autonomous: true

must_haves:
  truths:
    - "Growth option cards have equal height via CSS subgrid"
    - "Icons use neutral muted-foreground color (not element colors)"
    - "Only modifiers shown as text (e.g., '+2', 'Range 1'), no full action descriptions"
    - "Tooltips on hover reveal full action description"
    - "G1/G2/G3 labels appear on hover with opacity transition"
    - "orActions render as 'Option A OR Option B' with visual separator"
  artifacts:
    - path: "app/components/spirits/growth-panel.tsx"
      provides: "CSS subgrid layout with tooltips"
      contains: "grid-rows-subgrid"
  key_links:
    - from: "app/components/spirits/growth-panel.tsx"
      to: "@radix-ui/react-tooltip"
      via: "Tooltip wrapping icons"
      pattern: "Tooltip.*TooltipTrigger.*TooltipContent"
---

<objective>
Redesign growth panel with CSS subgrid for equal-height cards, neutral icon colors, minimal text (modifiers only), and hover tooltips for full action descriptions.

Purpose: Cleaner visual design with less text noise, equal card sizing regardless of content, and discoverable detail via tooltips.
Output: Updated growth-panel.tsx with subgrid layout and tooltips
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03.2-spirit-board-refinements/03.2-RESEARCH.md
@app/components/spirits/growth-panel.tsx
@app/components/icons/growth/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement CSS subgrid layout with tooltips</name>
  <files>app/components/spirits/growth-panel.tsx</files>
  <action>
1. Import Tooltip components from shadcn/ui:
   ```typescript
   import { Tooltip, TooltipContent, TooltipTrigger } from "@/components/ui/tooltip";
   ```

2. Update parent grid to define row template:
   ```typescript
   <div className="grid grid-cols-1 sm:grid-cols-3 gap-3">
   ```

3. Update each growth option card to use subgrid:
   ```typescript
   <div
     key={option.id}
     className="row-span-2 grid grid-rows-subgrid gap-2 bg-muted/30 rounded-lg p-3 group"
   >
   ```
   - `row-span-2` tells card it spans 2 rows (icons row + label row)
   - `grid-rows-subgrid` inherits row sizing from parent
   - `group` enables group-hover for label reveal

4. Row 1 - Actions with icons and minimal text:
   - Wrap each action icon in Tooltip
   - Icon uses `text-muted-foreground` (neutral, not element-colored)
   - Icon size: `w-8 h-8` (bigger than before)
   - Show only modifier text next to icon: "+2", "Range 1", "Minor", "Major", etc.
   - For reclaim: just icon (no text needed)
   - Full description in TooltipContent

5. Row 2 - Option ID (hover reveal):
   ```typescript
   <div className="text-xs text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity">
     {option.id}
   </div>
   ```

6. Handle orActions for complex spirits (Fractured Days):
   - If option.orActions exists, render as "Option A | Option B" or vertically stacked
   - Each or-option gets its own icon group with label
   - Visual separator between options (e.g., "OR" text or divider)

7. Handle repeat for complex spirits:
   - If option.repeat exists, show "x{repeat}" badge next to actions

Format helper for minimal text display:
```typescript
function getActionModifier(action: GrowthAction): string | null {
  switch (action.type) {
    case "gainEnergy": return action.amount ? `+${action.amount}` : null;
    case "addPresence": return action.range !== undefined ? `Range ${action.range}` : null;
    case "gainPowerCard": return action.cardType === "major" ? "Major" : "Minor";
    case "push": return action.count ? `${action.count}` : null;
    case "damage": return action.amount ? `${action.amount}` : null;
    default: return null;
  }
}
```
  </action>
  <verify>
   - `grep -q "grid-rows-subgrid" app/components/spirits/growth-panel.tsx` returns 0
   - `grep -q "Tooltip" app/components/spirits/growth-panel.tsx` returns 0
   - `grep -q "text-muted-foreground" app/components/spirits/growth-panel.tsx` returns 0
   - `grep -q "group-hover:opacity" app/components/spirits/growth-panel.tsx` returns 0
  </verify>
  <done>Growth panel uses CSS subgrid for equal-height cards, neutral icon colors, minimal modifier text, hover tooltips, and supports orActions/repeat patterns</done>
</task>

<task type="auto">
  <name>Task 2: Test and verify growth panel rendering</name>
  <files>app/components/spirits/growth-panel.tsx</files>
  <action>
1. Run dev server: `pnpm dev`

2. Manual verification steps:
   - Visit River Surges in Sunlight detail page
   - Verify growth options display in 3-column grid on desktop
   - Verify all cards have equal height (subgrid working)
   - Verify icons are neutral gray (muted-foreground)
   - Verify only modifiers shown (+1, Range 1, etc.), not full descriptions
   - Hover over an icon - verify tooltip shows full action description
   - Hover over card - verify G1/G2/G3 label appears with fade transition

3. Test responsive behavior:
   - Resize to mobile width
   - Verify cards stack to single column
   - Verify touch-friendly spacing

4. Verify typecheck passes: `pnpm typecheck`

Note: If seed data doesn't have orActions/repeat yet (added in schema but not seeded), that's expected - those will be used when complex spirits are seeded in Plan 06.
  </action>
  <verify>
   - `pnpm typecheck` passes
   - `pnpm dev` runs without errors
  </verify>
  <done>Growth panel renders correctly with subgrid, tooltips work, responsive layout verified</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` - No type errors
2. Visual inspection:
   - Cards aligned at equal height
   - Icons neutral gray
   - Hover reveals tooltips and G1/G2/G3 labels
   - Responsive stacking on mobile
</verification>

<success_criteria>
- Growth option cards have consistent height via CSS subgrid
- Icons use text-muted-foreground (neutral gray, not element colors)
- Action text shows only modifiers (+2, Range 1, Minor, Major), not full descriptions
- Tooltips appear on hover with full action description
- G1/G2/G3 labels fade in on card hover
- Layout responsive (3 columns on desktop, 1 on mobile)
- orActions pattern ready for complex spirits (renders OR separator)
- repeat pattern ready (shows x{N} badge)
</success_criteria>

<output>
After completion, create `.planning/phases/03.2-spirit-board-refinements/03.2-03-SUMMARY.md`
</output>
