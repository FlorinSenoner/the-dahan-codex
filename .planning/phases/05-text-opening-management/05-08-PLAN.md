---
phase: 05-text-opening-management
plan: 08
type: execute
wave: 1
depends_on: []
files_modified:
  - convex/schema.ts
  - convex/openings.ts
  - convex/seed.ts
  - app/components/admin/editable-opening.tsx
  - app/components/spirits/opening-section.tsx
  - app/components/spirits/turn-accordion.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Turn notes field is removed from schema and UI"
    - "Opening-level description remains for strategy notes"
    - "Existing seed data works without notes field"
  artifacts:
    - path: "convex/schema.ts"
      provides: "Opening schema without turn notes"
      contains: "turns: v.array"
    - path: "app/components/admin/editable-opening.tsx"
      provides: "Turn editor without notes input"
  key_links:
    - from: "convex/seed.ts"
      to: "convex/schema.ts"
      via: "opening turns structure"
      pattern: "turns:.*turn.*instructions"
---

<objective>
Remove the `notes` field from turns to simplify the data model. Opening-level description is sufficient for strategy notes.

Purpose: Reduce complexity in the turn editor and data model
Output: Schema, mutations, seed data, and UI all updated to remove turn notes
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-text-opening-management/05-VERIFICATION.md

GAP-04 from VERIFICATION.md:
Each turn has a notes field that adds complexity. Opening-level description is sufficient.
Remove notes from turn schema and UI.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove notes from schema and mutations</name>
  <files>convex/schema.ts, convex/openings.ts</files>
  <action>
  In convex/schema.ts:
  - Remove `notes: v.optional(v.string())` from the turns array object in openings table

  In convex/openings.ts:
  - Remove `notes` from createOpening args turn object
  - Remove `notes` from updateOpening args turn object
  - The handlers don't need changes as they just pass through the args
  </action>
  <verify>Run `pnpm typecheck` - Convex schema and mutations compile</verify>
  <done>Schema no longer includes notes field in turns</done>
</task>

<task type="auto">
  <name>Task 2: Update seed data and UI components</name>
  <files>convex/seed.ts, app/components/admin/editable-opening.tsx, app/components/spirits/opening-section.tsx, app/components/spirits/turn-accordion.tsx</files>
  <action>
  In convex/seed.ts:
  - Remove `notes` property from all turn objects in seedSpirits and reseedSpirits mutations

  In app/components/admin/editable-opening.tsx:
  - Remove `notes?: string` from Turn interface
  - Remove notes field from addTurn default object (line ~54)
  - Remove the EditableText component for notes in the turn editor (around lines 136-143)

  In app/components/spirits/opening-section.tsx:
  - Remove `notes: t.notes || ""` from formData initialization
  - Remove `notes: t.notes || undefined` from save handlers
  - Remove notes from createEmptyFormData turn template
  - Remove notes comparison from hasChanges check

  In app/components/spirits/turn-accordion.tsx:
  - Remove `notes?: string` from Turn interface
  - Remove the notes display block (the italic muted text section)
  </action>
  <verify>
  Run `pnpm typecheck` - all files compile
  Run `pnpm build` - builds successfully
  </verify>
  <done>Notes field completely removed from turns in schema, seed, and UI</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. `pnpm build` succeeds
3. No references to turn `notes` remain (grep -r "notes" in relevant files shows no turn-level notes)
</verification>

<success_criteria>
- Schema has no notes field in turns
- Seed data has no notes in turns
- UI editor has no notes input for turns
- Display component has no notes rendering
- Opening-level description remains intact
</success_criteria>

<output>
After completion, create `.planning/phases/05-text-opening-management/05-08-SUMMARY.md`
</output>
