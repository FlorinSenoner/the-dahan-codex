---
phase: 06.1-cleanup-thedahancodex
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/lib/power-dsl.ts (DELETE)
  - app/lib/spirit-colors.ts
  - app/components/icons/elements/sun.tsx (DELETE)
  - app/components/icons/elements/moon.tsx (DELETE)
  - app/components/icons/elements/fire.tsx (DELETE)
  - app/components/icons/elements/air.tsx (DELETE)
  - app/components/icons/elements/water.tsx (DELETE)
  - app/components/icons/elements/earth.tsx (DELETE)
  - app/components/icons/elements/plant.tsx (DELETE)
  - app/components/icons/elements/animal.tsx (DELETE)
  - app/components/icons/elements/any.tsx (DELETE)
  - app/components/icons/elements/star.tsx (DELETE)
  - app/components/icons/elements/index.ts (DELETE)
  - app/components/ui/drawer.tsx
  - app/components/ui/radio-group.tsx
  - app/components/ui/select.tsx
  - app/components/ui/tooltip.tsx
  - app/components/ui/popover.tsx
  - app/components/ui/accordion.tsx
  - app/components/ui/label.tsx
autonomous: true

must_haves:
  truths:
    - "No dead code from abandoned Phase 3.4 board visualization remains"
    - "No SSR-only directives exist in client-side SPA codebase"
    - "Build passes with no import errors"
  artifacts:
    - path: "app/lib/spirit-colors.ts"
      provides: "Color mappings for badges and filters only"
      not_contains: ["spiritTrackColors", "trackGradientClasses", "getSpiritTrackColors"]
  key_links:
    - from: "app/lib/spirit-colors.ts"
      to: "app/routes/spirits.$slug.tsx"
      via: "import"
      pattern: "complexityBadgeColors|elementBadgeColors|PLACEHOLDER_GRADIENT"
---

<objective>
Remove dead code from abandoned Phase 3.4 board visualization and clean up SSR-only directives.

Purpose: Technical debt cleanup - the codebase has accumulated dead code from the board visualization pivot (power-dsl.ts, element icons) and SSR patterns that have no effect in a pure client-side SPA ("use client" directives).

Output: Cleaner codebase with only used code remaining.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06.1-cleanup-thedahancodex/06.1-RESEARCH.md

# Files to modify
@app/lib/spirit-colors.ts
@app/components/ui/accordion.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove dead code files</name>
  <files>
    app/lib/power-dsl.ts (DELETE)
    app/components/icons/elements/*.tsx (DELETE - all 10 files)
    app/components/icons/elements/index.ts (DELETE)
  </files>
  <action>
Delete the following files that are no longer imported anywhere:

1. `app/lib/power-dsl.ts` - Abandoned Phase 3.4 power DSL (no imports)
2. All 10 element icon components in `app/components/icons/elements/`:
   - sun.tsx, moon.tsx, fire.tsx, air.tsx, water.tsx
   - earth.tsx, plant.tsx, animal.tsx, any.tsx, star.tsx
3. `app/components/icons/elements/index.ts` - Barrel export for deleted icons

Also delete the empty `app/components/icons/elements/` directory after removing files.

Verify no imports exist before deletion:
- `grep -r "power-dsl" app/` should return nothing
- `grep -r "icons/elements" app/` should return nothing

Note: Do NOT delete `app/components/icons/` directory - only the `elements/` subdirectory.
  </action>
  <verify>
- `ls app/lib/power-dsl.ts` returns "No such file"
- `ls app/components/icons/elements/` returns "No such file or directory"
- `pnpm typecheck` passes (no import errors)
  </verify>
  <done>12 dead code files removed, no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 2: Clean spirit-colors.ts unused exports</name>
  <files>app/lib/spirit-colors.ts</files>
  <action>
Remove the following unused exports from `spirit-colors.ts` (lines 127-174):

1. `spiritTrackColors` - Record of spirit-specific presence track colors (no longer needed after board visualization removed)
2. `trackGradientClasses` - Tailwind gradient classes for tracks
3. `getSpiritTrackColors()` - Function to get spirit-specific track colors

Keep the following exports which ARE still used:
- `PLACEHOLDER_GRADIENT` - Used in spirits.$slug.tsx, spirit-row.tsx
- `complexityBadgeColors` - Used in spirits.$slug.tsx, spirit-row.tsx
- `elementBadgeColors` - Used in spirits.$slug.tsx
- `elementFilterColors` - Used in filter-sheet.tsx, filter-chips.tsx
- `complexityFilterColors` - Used in filter-sheet.tsx
- `modifierColors` - Used in spirit-row.tsx

The file should end after the `modifierColors` export (around line 126).
  </action>
  <verify>
- `grep -c "spiritTrackColors" app/lib/spirit-colors.ts` returns 0
- `grep -c "trackGradientClasses" app/lib/spirit-colors.ts` returns 0
- `grep -c "getSpiritTrackColors" app/lib/spirit-colors.ts` returns 0
- `pnpm typecheck` passes
  </verify>
  <done>3 unused exports removed from spirit-colors.ts</done>
</task>

<task type="auto">
  <name>Task 3: Remove "use client" directives from UI components</name>
  <files>
    app/components/ui/drawer.tsx
    app/components/ui/radio-group.tsx
    app/components/ui/select.tsx
    app/components/ui/tooltip.tsx
    app/components/ui/popover.tsx
    app/components/ui/accordion.tsx
    app/components/ui/label.tsx
  </files>
  <action>
Remove the `"use client";` directive from the top of each file.

These are Next.js-style client component markers that have no effect in a Vite + React client-side SPA. All code runs client-side, so these directives are purely noise.

For each file:
1. Open the file
2. Remove the line `"use client";` (typically line 1)
3. Remove any blank line left after the directive

Example diff:
```diff
- "use client";
-
  import * as AccordionPrimitive from "@radix-ui/react-accordion";
```

Files to update (7 total):
- drawer.tsx
- radio-group.tsx
- select.tsx
- tooltip.tsx
- popover.tsx
- accordion.tsx
- label.tsx
  </action>
  <verify>
- `grep -l "use client" app/components/ui/*.tsx` returns empty (no matches)
- `pnpm typecheck` passes
- `pnpm lint:fix` passes (no biome errors from removal)
  </verify>
  <done>"use client" directives removed from all 7 UI component files</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` - All TypeScript types resolve correctly
2. `pnpm lint:fix` - No lint errors introduced
3. `pnpm build` - Production build succeeds
4. File counts: 12 files deleted, 8 files modified
</verification>

<success_criteria>
- power-dsl.ts deleted
- All 10 element icon files deleted
- elements/index.ts deleted
- spirit-colors.ts has only 6 exports (PLACEHOLDER_GRADIENT, complexityBadgeColors, elementBadgeColors, elementFilterColors, complexityFilterColors, modifierColors)
- No "use client" directives in any UI component
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/06.1-cleanup-thedahancodex/06.1-01-SUMMARY.md`
</output>
