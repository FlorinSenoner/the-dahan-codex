---
phase: "06.1"
plan: "03"
title: "Button Component Consistency & Update Banner Fix"
status: ready
created: 2026-02-01
source: UAT gaps
---

# Plan 06.1-03: Button Component Consistency & Update Banner Fix

**Goal:** Replace all raw `<button>` elements with shadcn Button component, fix update banner UX, and document the pattern to prevent future occurrences.

## Context

From UAT testing:
1. 6 raw `<button>` elements found in 4 files instead of using shadcn Button
2. Update banner needs: entire pill clickable, no green button, bottom-right position

## Tasks

### Task 1: Replace raw buttons with shadcn Button

**Files to modify:**

1. `app/components/pwa/install-prompt.tsx` (3 buttons)
   - Dismiss X button → Button variant="ghost" size="icon"
   - Install button → Button (default)
   - iOS dismiss X button → Button variant="ghost" size="icon"

2. `app/components/spirits/filter-chips.tsx` (1 button)
   - Clear all → Button variant="ghost" size="sm"

3. `app/components/spirits/filter-sheet.tsx` (1 button)
   - FilterPill → Button variant="outline" with custom className for pill styling

**Verification:**
```bash
grep -r "<button" app/components --include="*.tsx" | grep -v "Button" | grep -v node_modules
# Should return empty (only shadcn Button usage)
```

### Task 2: Redesign update banner as clickable pill

**File:** `app/components/pwa/update-banner.tsx`

**Changes:**
- Replace `<output>` wrapper with `<Button>`
- Remove nested Reload button
- Use variant="ghost" with custom pill styling
- Move from `top-4 right-4` to `bottom-20 right-4`
- Keep RefreshCw icon and "Update" text
- Add aria-live via wrapper div if needed for accessibility

**Target design:**
```tsx
<Button
  variant="ghost"
  onClick={onReload}
  className="fixed bottom-20 right-4 z-50 h-auto rounded-full border border-zinc-700 bg-zinc-800/90 px-3 py-1.5 text-sm text-zinc-300 hover:bg-zinc-700/90 animate-in fade-in"
>
  <RefreshCw className="h-3.5 w-3.5 mr-2" aria-hidden="true" />
  Update
</Button>
```

**Verification:**
- Visual: pill in bottom-right, no green, entire pill clickable
- `grep "<button" app/components/pwa/update-banner.tsx` returns empty

### Task 3: Update CLAUDE.md with Button guideline

**Add to Key Patterns section:**

```markdown
- Always use shadcn `Button` component instead of raw `<button>` elements
  - `Button variant="ghost" size="icon"` for icon-only buttons
  - `Button variant="ghost" size="sm"` for text links/actions
  - `Button variant="outline"` for secondary actions with borders
```

**Verification:**
```bash
grep -q "shadcn.*Button.*instead of raw" CLAUDE.md && echo "OK"
```

## Acceptance Criteria

- [ ] No raw `<button>` elements in app/components (all use shadcn Button)
- [ ] Update banner is a single clickable pill at bottom-20 right-4
- [ ] Update banner has no green/primary colored elements
- [ ] CLAUDE.md documents Button component requirement
- [ ] `pnpm typecheck` passes
- [ ] `pnpm build` succeeds

## Commit Strategy

Single commit: `fix(06.1-03): replace raw buttons with shadcn Button + update banner UX`
