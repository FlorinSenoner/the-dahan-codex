---
status: diagnosed
phase: 06.1-cleanup-thedahancodex
source: 06.1-01-SUMMARY.md, 06.1-02-SUMMARY.md
started: 2026-02-01T16:30:00Z
updated: 2026-02-01T16:40:00Z
---

## Current Test

[testing complete]

## Tests

### 1. App Loads Without Errors
expected: Spirit list page loads without console errors. No "module not found" or "undefined export" errors related to deleted files (power-dsl.ts, element icons, spirit-colors exports).
result: pass

### 2. UI Components Work
expected: Accordions, tooltips, popovers, selects, and drawers all function correctly. Open filters on spirit list (uses Drawer), expand an accordion on spirit detail page, hover for tooltips.
result: issue
reported: "there are still places where <button is used. also update all the docs and skills to make sure that this is not going to happen anymore in the future and that we always use the UI component"
severity: minor

### 3. Update Banner Pill Styling
expected: When a service worker update is available, the update banner appears as a small pill in the top-right corner (not a full-width bar). Shows a refresh icon with "Update available" and "Refresh" button.
result: issue
reported: "the entire pill should be clickable. remove the green part. move it from the right top to the right bottom"
severity: minor

### 4. Offline Indicator Still Works
expected: Go offline (browser DevTools > Network > Offline). A pill appears in the bottom-right corner showing "Offline". Go back online - the pill disappears.
result: pass

### 5. Build Passes
expected: Run `pnpm build` - it completes without errors. No TypeScript errors, no missing imports.
result: pass

## Summary

total: 5
passed: 3
issues: 2
pending: 0
skipped: 0

## Gaps

- truth: "UI components use shadcn Button instead of raw <button> elements"
  status: failed
  reason: "User reported: there are still places where <button is used. also update all the docs and skills to make sure that this is not going to happen anymore in the future and that we always use the UI component"
  severity: minor
  test: 2
  root_cause: "6 raw <button> elements in 4 files: install-prompt.tsx (3), update-banner.tsx (1), filter-chips.tsx (1), filter-sheet.tsx (1). No documentation enforcing Button component usage."
  artifacts:
    - path: "app/components/pwa/install-prompt.tsx"
      issue: "3 raw <button> elements (dismiss X, Install, iOS dismiss X)"
    - path: "app/components/pwa/update-banner.tsx"
      issue: "1 raw <button> element (Reload)"
    - path: "app/components/spirits/filter-chips.tsx"
      issue: "1 raw <button> element (Clear all)"
    - path: "app/components/spirits/filter-sheet.tsx"
      issue: "1 raw <button> element (FilterPill component)"
  missing:
    - "Replace all raw <button> with shadcn Button component"
    - "Add guideline to CLAUDE.md requiring Button component usage"

- truth: "Update banner is a clickable pill in bottom-right corner"
  status: failed
  reason: "User reported: the entire pill should be clickable. remove the green part. move it from the right top to the right bottom"
  severity: minor
  test: 3
  root_cause: "update-banner.tsx uses <output> wrapper with nested <button> for Reload action. Positioned top-4 right-4. Has green primary-colored button inside."
  artifacts:
    - path: "app/components/pwa/update-banner.tsx"
      issue: "Nested button structure, wrong position, green styling"
  missing:
    - "Make entire pill a clickable button element"
    - "Remove nested Reload button (green part)"
    - "Move from top-4 right-4 to bottom-20 right-4"
