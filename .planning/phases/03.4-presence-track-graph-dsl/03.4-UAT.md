---
status: complete
phase: 03.4-presence-track-graph-dsl
source: 03.4-01-SUMMARY.md, 03.4-02-SUMMARY.md, 03.4-03-SUMMARY.md, 03.4-04-SUMMARY.md, 03.4-05-SUMMARY.md, 03.4-06-SUMMARY.md
started: 2026-01-27T13:05:00Z
updated: 2026-01-27T14:30:00Z
---

## Current Test
<!-- OVERWRITE each test - shows where we are -->

[testing complete]

## Tests

### 1. Simple Spirit Presence Track Display
expected: Navigate to River Surges in Sunlight spirit detail page. Presence track section shows two rows: Energy track (top) and Card Plays track (bottom). Energy track displays 7 slots with values: 1, 2, 2, 3, 4, 4, 5. Card Plays track displays 7 slots with one marked "R" (reclaim) at position 5.
result: pass

### 2. Simple Spirit CSS Grid Layout
expected: On Lightning's Swift Strike spirit page, presence track nodes are horizontally aligned in a grid. Nodes within each row are evenly spaced using CSS Grid (not flex). The two tracks (Energy and Card Plays) are visually distinct rows.
result: pass

### 3. Complex Spirit Multi-Track Display
expected: Navigate to Starlight Seeks Its Form spirit page. Presence track section shows 6 tracks (not just 2). Tracks include Energy, Card Plays, plus 4 additional element tracks. Each track has a label on the left indicating its type.
result: pass

### 4. Complex Spirit Cross-Track Edge
expected: Navigate to Finder of Paths Unseen spirit page. Presence track shows a visual connection (dashed line) from the 4th Energy slot to the 4th Card Plays slot, indicating the cross-track edge where presence can jump between tracks.
result: issue
reported: "as discussed previously this does absolutely not work - Finder has web/diamond shaped track with non-linear paths, not two parallel rows"
severity: blocker

### 5. Bidirectional Track Indication
expected: On Finder of Paths Unseen spirit page, the presence track system indicates bidirectional movement is possible (presence can move backwards along the track, not just forwards).
result: issue
reported: "does not work - Finder's entire track structure is wrong (web/diamond shape, not grid)"
severity: blocker

### 6. Presence Cap Display
expected: Navigate to Serpent Slumbering Beneath the Island spirit page. The Deep Slumber track (3rd row) shows presenceCap values. Slots display cap numbers (5, 6, 7, etc. up to 13) instead of regular energy/card play values.
result: issue
reported: "does not work - Serpent has 2 rows + separate circular Deep Slumber track, not 3 grid rows. Deep Slumber is a presence cap mechanic, not a presence track row."
severity: blocker

### 7. Track Type Tooltips
expected: On any spirit page, hover over a presence track slot. A tooltip appears showing relevant information about the slot (e.g., track type like "Energy", element if present, or special attributes like reclaim/presenceCap).
result: issue
reported: "Energy slots should render energy icon. Need to handle: multiple elements, 'Any' element (pick each turn), and Starlight's 'Star' element (pick once, stays same for game - see special rules)"
severity: major

### 8. Spirit-Specific Track Colors
expected: Presence tracks use spirit-specific color theming. River uses cyan/amber gradient, Lightning uses orange/blue, Serpent uses purple/emerald. The track row backgrounds have subtle gradient colors matching the spirit's element theme.
result: pass

## Summary

total: 8
passed: 4
issues: 4
pending: 0
skipped: 0

## Gaps

- truth: "Finder's presence track displays as web/diamond shape with non-linear paths"
  status: failed
  reason: "User reported: Finder has web/diamond shaped track with non-linear paths, not two parallel rows. Current grid-based DSL cannot represent this structure."
  severity: blocker
  test: 4
  root_cause: ""
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Serpent's Deep Slumber is a separate circular track for presence cap"
  status: failed
  reason: "User reported: Serpent has 2 rows + separate circular Deep Slumber track, not 3 grid rows. Deep Slumber is a presence cap mechanic (5,7,8,10,11,12,13), not a presence track row."
  severity: blocker
  test: 6
  root_cause: ""
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Presence slots render appropriate icons for energy, elements, and special cases"
  status: failed
  reason: "User reported: Energy slots should render energy icon. Need to handle multiple elements, 'Any' element (pick each turn), and Starlight's 'Star' element (pick once, stays same for game)."
  severity: major
  test: 7
  root_cause: ""
  artifacts: []
  missing: []
  debug_session: ""
