---
phase: 03.6-simplify-spirit-board-text-openings
plan: 07
type: execute
wave: 4
depends_on: ["03.6-01", "03.6-05", "03.6-06"]
files_modified:
  - app/routes/spirits.$slug.tsx
autonomous: true

must_haves:
  truths:
    - "Spirit detail page shows Openings section"
    - "OpeningSection receives spirit ID from context"
    - "Page displays turn-by-turn opening guide for River"
  artifacts:
    - path: "app/routes/spirits.$slug.tsx"
      provides: "Spirit detail with opening section integration"
      contains: "OpeningSection"
  key_links:
    - from: "app/routes/spirits.$slug.tsx"
      to: "app/components/spirits/opening-section.tsx"
      via: "import and render"
      pattern: "import.*OpeningSection"
---

<objective>
Integrate the OpeningSection component into the spirit detail page, showing openings below special rules and above external links.

Purpose: Complete the frontend integration to display text-based openings
Output: Spirit detail page shows openings when available
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/routes/spirits.$slug.tsx
@.planning/phases/03.6-simplify-spirit-board-text-openings/03.6-06-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add OpeningSection to spirit detail page</name>
  <files>app/routes/spirits.$slug.tsx</files>
  <action>
In `app/routes/spirits.$slug.tsx`:

1. Add import at the top with other spirit component imports:
```typescript
import { OpeningSection } from "@/components/spirits/opening-section";
```

2. In `SpiritDetailContent`, add the OpeningSection between SpecialRules and ExternalLinks:

Find this section:
```tsx
{spirit.specialRules && spirit.specialRules.length > 0 && (
  <SpecialRules rules={spirit.specialRules} />
)}

<ExternalLinks spiritName={spirit.name} wikiUrl={spirit.wikiUrl} />
```

Change to:
```tsx
{spirit.specialRules && spirit.specialRules.length > 0 && (
  <SpecialRules rules={spirit.specialRules} />
)}

<OpeningSection spiritId={spirit._id} />

<ExternalLinks spiritName={spirit.name} wikiUrl={spirit.wikiUrl} />
```

The OpeningSection handles its own loading/empty states, so no conditional wrapper is needed.
  </action>
  <verify>
Run `pnpm typecheck` - should pass
Run `pnpm build` - should complete
Run dev server and visit `/spirits/river-surges-in-sunlight` - should show Openings section with turn accordion
  </verify>
  <done>Spirit detail page shows OpeningSection with turn-by-turn guide</done>
</task>

<task type="auto">
  <name>Task 2: Verify full integration</name>
  <files>app/routes/spirits.$slug.tsx</files>
  <action>
Verify the complete spirit detail page structure in `SpiritDetailContent`:

1. Image with view transition
2. Name/title with view transition
3. Complexity and element badges
4. Summary text
5. Overview section (mobile position)
6. Special rules (if any)
7. **Openings section (NEW)**
8. External links

Ensure there are no remnants of the old board components (GrowthPanel, PresenceTrack, InnatePowers, CardHand imports or usage).

Run a final visual check:
- Spirit detail page should NOT show: Growth, Presence Tracks, Innate Powers, Starting Cards
- Spirit detail page SHOULD show: Openings section with accordion UI
  </action>
  <verify>
Run `pnpm dev` and `npx convex dev` in parallel
Visit `/spirits/river-surges-in-sunlight`
Verify:
- Page loads without errors
- Openings section appears with "Standard Opening" title
- 3 turns are shown, all expanded by default
- Clicking accordion headers collapses/expands turns
- No board sections visible
  </verify>
  <done>Spirit detail page fully integrated with openings, no board remnants</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. `pnpm build` completes
3. Spirit detail page at `/spirits/river-surges-in-sunlight` shows:
   - Image, name, badges, summary
   - Overview section with radar chart
   - Openings section with 3-turn accordion
   - External links
4. NO Growth, Presence Tracks, Innate Powers, or Cards sections
</verification>

<success_criteria>
- OpeningSection integrated into spirit detail
- River shows "Standard Opening" with 3 turns
- All turns expanded by default
- Page structure matches simplified design
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03.6-simplify-spirit-board-text-openings/03.6-07-SUMMARY.md`
</output>
