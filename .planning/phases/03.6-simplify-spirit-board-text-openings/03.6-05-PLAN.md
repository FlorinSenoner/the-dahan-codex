---
phase: 03.6-simplify-spirit-board-text-openings
plan: 05
type: execute
wave: 3
depends_on: ["03.6-04"]
files_modified:
  - convex/seed.ts
autonomous: true

must_haves:
  truths:
    - "River Surges in Sunlight has sample opening data"
    - "Opening data has turn-by-turn instructions"
    - "Seed mutation populates openings table"
  artifacts:
    - path: "convex/seed.ts"
      provides: "Sample opening seed data"
      contains: "openings"
  key_links:
    - from: "convex/seed.ts"
      to: "convex/schema.ts"
      via: "table insert"
      pattern: 'ctx.db.insert\\("openings"'
---

<objective>
Add sample opening data to seed.ts for River Surges in Sunlight to demonstrate the text-based opening guide system.

Purpose: Provide initial data for testing the opening UI components
Output: River has one sample opening with 3 turns of instructions
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03.6-simplify-spirit-board-text-openings/03.6-RESEARCH.md
@convex/seed.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add sample opening for River Surges in Sunlight</name>
  <files>convex/seed.ts</files>
  <action>
In `convex/seed.ts`, after seeding the spirits (at the end of the seedSpirits handler, before the return statement), add sample opening data:

```typescript
// Seed sample opening for River Surges in Sunlight
await ctx.db.insert("openings", {
  spiritId: riverId, // Use the riverId from earlier in the function
  slug: "river-standard-opening",
  name: "Standard Opening",
  description: "A balanced opening focusing on energy generation and board control.",
  difficulty: "Beginner",
  turns: [
    {
      turn: 1,
      title: "Turn 1: Establish Presence",
      instructions: "Take Growth Option 2: Add two Presence and gain a Power Card. Place presence in lands with Dahan to maximize your reach. Play Boon of Vigor on a spirit that needs energy (or yourself).",
      notes: "River's first turn is about establishing reach. Don't worry about defending yet.",
    },
    {
      turn: 2,
      title: "Turn 2: Build Momentum",
      instructions: "Take Growth Option 3: Add Presence to a Wetland within Range 2 and gain 1 Energy. Play Flash Floods to push Explorers away from a building land, or use River's Bounty to gather Dahan.",
      notes: "Start setting up for your innate power by getting Water presence revealed.",
    },
    {
      turn: 3,
      title: "Turn 3: Control the Flow",
      instructions: "Take Growth Option 2 again for more presence and cards. By now you should have enough presence to trigger Massive Flooding. Focus on lands where you can push Invaders into each other or off the island.",
      notes: "River excels at controlling Invader movement. Use this to create favorable Ravage situations.",
    },
  ],
  author: "Spirit Island Community",
  sourceUrl: "https://querki.net/u/darker/spirit-island-faq/#!.7w4g8aw",
});
```

Make sure `riverId` is accessible at the point where you insert the opening. It should be the ID returned from inserting River Surges in Sunlight earlier in the function.
  </action>
  <verify>
Run `pnpm typecheck` - should pass
Run the seed mutation via Convex dashboard or CLI to verify data inserts correctly
  </verify>
  <done>Sample opening for River seeded with 3 turns of instructions</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. Seed mutation can be run without errors
3. Opening data exists in Convex database for River
4. Opening has spiritId reference, slug, name, difficulty, and 3 turns
</verification>

<success_criteria>
- River has one sample opening in seed data
- Opening has turn-by-turn instructions with titles and notes
- Seed mutation inserts opening data successfully
</success_criteria>

<output>
After completion, create `.planning/phases/03.6-simplify-spirit-board-text-openings/03.6-05-SUMMARY.md`
</output>
