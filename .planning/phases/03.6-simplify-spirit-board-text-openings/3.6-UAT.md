---
status: diagnosed
phase: 03.6-simplify-spirit-board-text-openings
source: 03.6-01-SUMMARY.md, 03.6-02-SUMMARY.md, 03.6-03-SUMMARY.md, 03.6-04-SUMMARY.md, 03.6-05-SUMMARY.md, 03.6-06-SUMMARY.md, 03.6-07-SUMMARY.md
started: 2026-01-28T14:10:00Z
updated: 2026-01-28T14:20:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Board Components Removed
expected: Spirit detail page shows NO Growth, Presence Tracks, Innate Powers, or Starting Cards sections. Only: image, name, badges, summary, overview, special rules, openings, external links.
result: issue
reported: "you left the special rules, make sure to also remove them"
severity: major

### 2. Variant Tabs Show "Base"
expected: On a spirit with aspects (like Lightning's Swift Strike), the variant tabs show "Base" for the base spirit tab, not the spirit name.
result: pass

### 3. E2E Tests Pass
expected: All 13 E2E tests pass (9 spirits, 4 smoke). Run `pnpm test:e2e` to verify.
result: pass

### 4. Openings Section Appears for River
expected: On River Surges in Sunlight detail page, an "Openings" section appears with "Standard Opening" showing 3 turns (each turn expandable, all expanded by default).
result: pass
notes: Required running reseedSpirits mutation - data was in code but not seeded

### 5. Turn Accordion Content
expected: Each turn shows: turn number, title (e.g., "Setup"), instructions text, and optional notes. Turns are numbered 1, 2, 3.
result: pass

### 6. Opening Attribution
expected: The opening displays author attribution and/or source link (Spirit Island Community FAQ).
result: issue
reported: "works, but the link points to a 404/error page: https://querki.net/u/darker/spirit-island-faq/#!spirit-island-faq point it to the actual source"
severity: minor

### 7. No Openings for Other Spirits
expected: Spirits without openings (like Lightning's Swift Strike) show no openings section - the section is completely hidden, not showing "No openings available".
result: pass

### 8. Aspect Openings Isolation
expected: Aspects inherit openings from base spirit OR have their own. Check an aspect (like Sunshine) - should either show River's openings or none if aspects have separate openings.
result: issue
reported: "aspects should never inherit. they should only show their own openings"
severity: major

## Summary

total: 8
passed: 5
issues: 3
pending: 0
skipped: 0

## Gaps

- truth: "Spirit detail page should not show Special Rules section"
  status: failed
  reason: "User reported: you left the special rules, make sure to also remove them"
  severity: major
  test: 1
  root_cause: "SpecialRules component still imported and rendered in spirits.$slug.tsx (line 18 import, lines 286-288 JSX). Component file still exists."
  artifacts:
    - path: "app/routes/spirits.$slug.tsx"
      issue: "SpecialRules import and render still present"
    - path: "app/components/spirits/special-rules.tsx"
      issue: "Component file should be deleted"
  missing:
    - "Remove SpecialRules import from spirits.$slug.tsx"
    - "Remove SpecialRules JSX render block from spirits.$slug.tsx"
    - "Delete app/components/spirits/special-rules.tsx"
    - "Optionally remove specialRules field from schema"
  debug_session: ""

- truth: "Opening source link points to valid URL"
  status: failed
  reason: "User reported: works, but the link points to a 404/error page: https://querki.net/u/darker/spirit-island-faq/#!spirit-island-faq point it to the actual source"
  severity: minor
  test: 6
  root_cause: "sourceUrl in seed.ts points to broken querki.net fragment #!.7w4g8aw. Root FAQ URL works but fragment is 404."
  artifacts:
    - path: "convex/seed.ts"
      issue: "sourceUrl at lines 415 and 845 points to broken URL"
  missing:
    - "Update sourceUrl to https://querki.net/u/darker/spirit-island-faq in both seedSpirits and reseedSpirits"
    - "Run reseedSpirits to update database"
  debug_session: ""

- truth: "Aspects should only show their own openings, never inherit from base spirit"
  status: failed
  reason: "User reported: aspects should never inherit. they should only show their own openings"
  severity: major
  test: 8
  root_cause: "Code is architecturally correct - aspects query by their own _id, not base spirit. OpeningSection receives spirit._id which is the aspect's own ID when viewing an aspect. Query returns empty and section is hidden. User reported as design constraint clarification."
  artifacts:
    - path: "app/components/spirits/opening-section.tsx"
      issue: "Receives spiritId prop - queries by exact match, no inheritance"
    - path: "convex/openings.ts"
      issue: "listBySpirit queries by exact spiritId equality"
  missing:
    - "Verify aspect tabs pass correct aspect _id (not base spirit _id)"
    - "Document design decision: aspects never inherit openings"
  debug_session: ""
