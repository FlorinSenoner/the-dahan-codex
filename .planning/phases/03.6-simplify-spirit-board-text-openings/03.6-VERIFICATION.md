---
phase: 03.6-simplify-spirit-board-text-openings
verified: 2026-01-28T13:10:44Z
status: gaps_found
score: 5/6 must-haves verified
gaps:
  - truth: "Multiple openings per spirit shown as tabs (like aspects), stored in URL"
    status: partial
    reason: "OpeningSection only displays first opening with TODO comment for future tabs implementation"
    artifacts:
      - path: "app/components/spirits/opening-section.tsx"
        issue: "Line 38: 'For now, just show the first opening. Future: add tabs for multiple openings'"
    missing:
      - "OpeningTabs component with URL state management (following variant-tabs pattern)"
      - "Search param integration for 'opening' query parameter"
      - "Tab UI when multiple openings exist for a spirit"
---

# Phase 3.6: Simplify Spirit Board + Text Openings Verification Report

**Phase Goal:** Remove complex board visualization components and replace with simple text-based turn-by-turn opening guides

**Verified:** 2026-01-28T13:10:44Z
**Status:** gaps_found
**Re-verification:** No — initial verification

## Goal Achievement

### Observable Truths

| # | Truth | Status | Evidence |
|---|-------|--------|----------|
| 1 | Spirit detail page shows: image, title, element/complexity badges, overview with radar, strengths/weaknesses | ✓ VERIFIED | `spirits.$slug.tsx` contains all sections: image (L212-234), title/badges (L238-274), overview with radar via OverviewSection (L282-284, L296-298) |
| 2 | Growth, presence track, innate powers, and cards sections are removed | ✓ VERIFIED | No imports in `spirits.$slug.tsx`, components deleted from `app/components/spirits/`, no grep matches for board components |
| 3 | New "openings" collection in Convex stores text-based turn-by-turn guides | ✓ VERIFIED | `convex/schema.ts` L68-94 defines openings table with spiritId, turns array, metadata fields |
| 4 | Openings display as collapsible accordions (one per turn, default open) | ✓ VERIFIED | `turn-accordion.tsx` uses Radix Accordion with `type="multiple"` and `defaultValue` containing all turns (L22), all open by default |
| 5 | Multiple openings per spirit shown as tabs (like aspects), stored in URL | ✗ PARTIAL | OpeningSection (L38-39) has TODO: "For now, just show the first opening. Future: add tabs for multiple openings" |
| 6 | All related schema fields, components, tests, and seed data removed/cleaned | ✓ VERIFIED | Schema has no growth/presenceTracks/innates/uniquePowers, seed.ts 854 lines (down from 3068), E2E tests updated, components deleted |

**Score:** 5/6 truths verified (1 partial implementation)

### Required Artifacts

| Artifact | Expected | Status | Details |
|----------|----------|--------|---------|
| `app/routes/spirits.$slug.tsx` | Simplified spirit detail without board components | ✓ VERIFIED | 302 lines, imports OpeningSection (L16), renders it (L290), no board component imports |
| `convex/schema.ts` | Openings table with spirit reference | ✓ VERIFIED | Lines 68-94, spiritId foreign key, turns array with turn/title/instructions/notes |
| `convex/openings.ts` | Queries for openings (listBySpirit, getBySlug) | ✓ VERIFIED | 25 lines, both queries implemented with proper indexes |
| `app/components/spirits/opening-section.tsx` | Section component querying openings | ✓ VERIFIED | 86 lines, queries via api.openings.listBySpirit, handles loading/empty states |
| `app/components/spirits/turn-accordion.tsx` | Accordion for turn-by-turn display | ✓ VERIFIED | 46 lines, Radix Accordion with type="multiple", defaultValue for all-open |
| `convex/seed.ts` | Sample opening data for River | ✓ VERIFIED | Lines 381-416, "Standard Opening" with 3 turns, proper structure |
| Board components (deleted) | Growth, Presence, Innates, Cards removed | ✓ VERIFIED | 12 files deleted (7 components + 5 growth icons), no directory exists |
| Growth icons (deleted) | Icons removed from app/components/icons/growth/ | ✓ VERIFIED | Directory does not exist, only elements/ remains |

### Key Link Verification

| From | To | Via | Status | Details |
|------|----|----|--------|---------|
| `spirits.$slug.tsx` | `opening-section.tsx` | import | ✓ WIRED | Line 16: `import { OpeningSection }`, Line 290: `<OpeningSection spiritId={spirit._id} />` |
| `opening-section.tsx` | `convex/openings.ts` | Convex query | ✓ WIRED | Line 16: `api.openings.listBySpirit`, useQuery call with spiritId arg |
| `opening-section.tsx` | `turn-accordion.tsx` | import and render | ✓ WIRED | Line 8: `import { TurnAccordion }`, Line 64: `<TurnAccordion turns={opening.turns} />` |
| `turn-accordion.tsx` | `@/components/ui/accordion` | Radix UI | ✓ WIRED | Lines 1-6: imports Accordion primitives, Line 25: renders with proper props |

### Requirements Coverage

Not applicable - Phase 3.6 is a simplification pivot, not mapped to original REQUIREMENTS.md.

### Anti-Patterns Found

| File | Line | Pattern | Severity | Impact |
|------|------|---------|----------|--------|
| `app/components/spirits/opening-section.tsx` | 38-39 | TODO comment for future feature | ⚠️ Warning | Success criteria #5 (multiple openings with tabs) not fully implemented |

### Human Verification Required

#### 1. Visual Verification - Spirit Detail Page Layout

**Test:** Navigate to `/spirits/river-surges-in-sunlight` in a browser
**Expected:** 
- Page shows: spirit image, title, complexity/element badges, summary text
- Overview section visible (desktop: right sidebar, mobile: collapsible)
- Special Rules section (if any)
- Openings section with "Standard Opening" accordion
- External Links section
- NO Growth, Presence Tracks, Innate Powers, or Cards sections

**Why human:** Visual layout confirmation requires browser rendering

#### 2. Accordion Interaction

**Test:** Click on turn headers in the Openings accordion
**Expected:**
- All 3 turns are expanded by default
- Clicking a turn header collapses that turn
- Clicking again re-expands it
- Other turns remain in their state (multiple can be open/closed)

**Why human:** Interaction behavior requires user input

#### 3. Opening Content Readability

**Test:** Read the turn instructions in the Standard Opening accordion
**Expected:**
- Text is readable and formatted correctly
- Notes appear in italic/muted style below instructions
- Author and source link visible at bottom
- Difficulty badge shows "Beginner"

**Why human:** Readability and styling assessment

### Gaps Summary

**1 partial implementation found:**

**Success Criteria #5: Multiple openings per spirit shown as tabs (like aspects), stored in URL**
- **Current state:** OpeningSection displays only the first opening from the query results
- **Evidence:** Line 38-39 in `opening-section.tsx`: `// For now, just show the first opening. Future: add tabs for multiple openings`
- **Missing components:**
  - OpeningTabs component (similar to VariantTabs pattern)
  - URL state management for selected opening (search param `?opening=slug`)
  - Tab rendering when `openings.length > 1`
  - Navigation between multiple openings

**Why this is a gap:**
- ROADMAP success criteria explicitly states "Multiple openings per spirit shown as tabs (like aspects), stored in URL"
- Current implementation only shows first opening, even if multiple exist
- Pattern already established in variant-tabs.tsx (useSearch, navigate with search params) but not applied to openings

**Impact:**
- LOW priority - only affects spirits with multiple openings (none seeded yet)
- River only has 1 opening, so current functionality works for demo
- Can be deferred to future phase (Phase 5: Text Opening Management)

---

_Verified: 2026-01-28T13:10:44Z_
_Verifier: Claude (gsd-verifier)_
