---
phase: 03.6-simplify-spirit-board-text-openings
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - convex/schema.ts
  - convex/seed.ts
autonomous: true

must_haves:
  truths:
    - "Schema no longer contains growth, presenceTracks, innates, uniquePowers fields"
    - "Seed data no longer contains board-related fields"
    - "Convex dev server runs without errors"
  artifacts:
    - path: "convex/schema.ts"
      provides: "Cleaned spirit schema without board fields"
      contains: "defineTable"
  key_links:
    - from: "convex/seed.ts"
      to: "convex/schema.ts"
      via: "schema validation"
---

<objective>
Clean Convex schema and seed data by removing all board-related fields (growth, presenceTracks, innates, uniquePowers, elementValidator).

Purpose: Remove unused schema complexity after board components are deleted
Output: Clean schema with only spirit reference data, clean seed data
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03.6-simplify-spirit-board-text-openings/03.6-RESEARCH.md
@convex/schema.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove board fields from schema.ts</name>
  <files>convex/schema.ts</files>
  <action>
In `convex/schema.ts`:

1. Remove the `elementValidator` const at the top of the file (lines 5-16) - it's only used by presenceTracks

2. In the `spirits` table definition, remove these optional fields:
   - `growth: v.optional(...)` - the entire growth object (lines ~76-130)
   - `presenceTracks: v.optional(...)` - the entire union type (lines ~131-224)
   - `innates: v.optional(...)` - the entire array (lines ~225-249)
   - `uniquePowers: v.optional(...)` - the entire array (lines ~250-262)

3. Keep these fields in the spirits table:
   - name, slug, complexity, summary, imageUrl, expansionId, elements
   - baseSpirit, aspectName, complexityModifier, description
   - strengths, weaknesses, powerRatings, specialRules, wikiUrl
   - All indexes (by_slug, by_expansion, by_base_spirit, by_complexity)

The resulting schema should be much simpler, with the spirits table having only reference/overview data.
  </action>
  <verify>Run `pnpm typecheck` in the root directory - may show errors in seed.ts which we'll fix next</verify>
  <done>Schema no longer has growth, presenceTracks, innates, uniquePowers fields</done>
</task>

<task type="auto">
  <name>Task 2: Remove board data from seed.ts</name>
  <files>convex/seed.ts</files>
  <action>
In `convex/seed.ts`, remove all board-related fields from every spirit object:

1. For River Surges in Sunlight and all its aspects, remove:
   - `growth: { ... }`
   - `presenceTracks: { ... }`
   - `innates: [ ... ]`
   - `uniquePowers: [ ... ]`

2. For Lightning's Swift Strike and all its aspects, remove same fields

3. For the 4 complex spirits (Finder, Starlight, Fractured Days, Serpent), remove same fields

Keep these fields for each spirit:
- name, slug, complexity, summary, description, imageUrl, expansionId, elements
- baseSpirit, aspectName, complexityModifier (for aspects)
- strengths, weaknesses, powerRatings, specialRules, wikiUrl

The seed file will be significantly shorter after this cleanup.
  </action>
  <verify>
Run `pnpm typecheck` - should pass with no errors
Run `npx convex dev --once` (or check Convex dashboard) - schema should deploy successfully
  </verify>
  <done>Seed data no longer contains board-related fields, Convex runs without errors</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. Convex schema deploys without errors
3. `convex/schema.ts` has ~100 lines (down from ~270)
4. No references to growth, presenceTracks, innates, uniquePowers in schema or seed
</verification>

<success_criteria>
- Schema reduced to reference data only
- All seed data cleaned of board fields
- Convex dev server runs successfully
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03.6-simplify-spirit-board-text-openings/03.6-02-SUMMARY.md`
</output>
