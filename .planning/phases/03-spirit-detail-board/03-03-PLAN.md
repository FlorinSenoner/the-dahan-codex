---
phase: 03-spirit-detail-board
plan: 03
type: execute
wave: 3
depends_on: ["03-02"]
files_modified:
  - app/components/spirits/overview-section.tsx
  - app/components/spirits/power-radar-chart.tsx
  - app/routes/spirits.$slug.tsx
  - app/routes/spirits.$slug.$aspect.tsx
autonomous: true

must_haves:
  truths:
    - "Radar chart displays 5 power rating axes (Offense, Defense, Control, Fear, Utility)"
    - "Radar chart renders with dark theme colors"
    - "Strengths are displayed as bullet list"
    - "Weaknesses are displayed as bullet list"
    - "Complexity badge and elements are visible in overview"
  artifacts:
    - path: "app/components/spirits/power-radar-chart.tsx"
      provides: "Recharts radar chart with theming"
      min_lines: 30
    - path: "app/components/spirits/overview-section.tsx"
      provides: "Complete overview with radar, strengths, weaknesses"
      min_lines: 60
  key_links:
    - from: "app/components/spirits/overview-section.tsx"
      to: "app/components/spirits/power-radar-chart.tsx"
      via: "component composition"
      pattern: "import.*PowerRadarChart"
    - from: "app/routes/spirits.$slug.tsx"
      to: "app/components/spirits/overview-section.tsx"
      via: "component import"
      pattern: "import.*OverviewSection"
---

<objective>
Build the Overview section with radar chart for power ratings and strengths/weaknesses lists.

Purpose: First visible feature of Phase 3 - users see the spirit's "shape" at a glance (DTAIL-04, DTAIL-05, DTAIL-06, DTAIL-07).
Output: Working radar chart and Overview section showing complexity, elements, power ratings, strengths, and weaknesses.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-spirit-detail-board/03-CONTEXT.md
@.planning/phases/03-spirit-detail-board/03-RESEARCH.md
@.planning/phases/03-spirit-detail-board/03-02-SUMMARY.md
@app/routes/spirits.$slug.tsx
@app/lib/spirit-colors.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PowerRadarChart component</name>
  <files>app/components/spirits/power-radar-chart.tsx</files>
  <action>
Create a responsive radar chart component using Recharts that displays the 5 power ratings.

```typescript
import {
  RadarChart,
  PolarGrid,
  PolarAngleAxis,
  Radar,
  ResponsiveContainer,
} from "recharts";

interface PowerRatingsData {
  offense: number;
  defense: number;
  control: number;
  fear: number;
  utility: number;
}

interface PowerRadarChartProps {
  ratings: PowerRatingsData;
}

export function PowerRadarChart({ ratings }: PowerRadarChartProps) {
  const data = [
    { axis: "Offense", value: ratings.offense, fullMark: 5 },
    { axis: "Defense", value: ratings.defense, fullMark: 5 },
    { axis: "Control", value: ratings.control, fullMark: 5 },
    { axis: "Fear", value: ratings.fear, fullMark: 5 },
    { axis: "Utility", value: ratings.utility, fullMark: 5 },
  ];

  return (
    <div className="min-h-[250px] w-full max-w-[300px] mx-auto">
      <ResponsiveContainer width="100%" height={250}>
        <RadarChart cx="50%" cy="50%" outerRadius="70%" data={data}>
          <PolarGrid
            stroke="hsl(var(--border))"
            strokeOpacity={0.5}
          />
          <PolarAngleAxis
            dataKey="axis"
            tick={{
              fill: "hsl(var(--muted-foreground))",
              fontSize: 11,
              fontWeight: 500,
            }}
            tickLine={false}
          />
          <Radar
            dataKey="value"
            stroke="hsl(var(--primary))"
            strokeWidth={2}
            fill="hsl(var(--primary))"
            fillOpacity={0.3}
          />
        </RadarChart>
      </ResponsiveContainer>
    </div>
  );
}
```

Key implementation details:
- ResponsiveContainer wrapped in a div with min-h-[250px] (pitfall #1 from research)
- Max width 300px to keep it compact on mobile
- Using CSS variables for dark theme colors
- fullMark: 5 sets the scale (ratings are 0-5)
- outerRadius 70% to leave room for labels
- No PolarRadiusAxis (cleaner look)
  </action>
  <verify>Run `pnpm typecheck` - no errors</verify>
  <done>PowerRadarChart component renders responsive radar chart</done>
</task>

<task type="auto">
  <name>Task 2: Create OverviewSection component</name>
  <files>app/components/spirits/overview-section.tsx</files>
  <action>
Create the Overview section that combines radar chart with complexity, elements, strengths, and weaknesses.

```typescript
import type { Doc } from "convex/_generated/dataModel";
import { Badge } from "@/components/ui/badge";
import { Heading, Text } from "@/components/ui/typography";
import { complexityBadgeColors, elementBadgeColors } from "@/lib/spirit-colors";
import { cn } from "@/lib/utils";
import { PowerRadarChart } from "./power-radar-chart";

interface OverviewSectionProps {
  spirit: Doc<"spirits">;
}

export function OverviewSection({ spirit }: OverviewSectionProps) {
  const hasRatings = spirit.powerRatings;
  const hasStrengths = spirit.strengths && spirit.strengths.length > 0;
  const hasWeaknesses = spirit.weaknesses && spirit.weaknesses.length > 0;

  return (
    <section className="space-y-6">
      {/* Complexity and Elements Row */}
      <div className="flex flex-wrap items-center justify-center gap-2">
        <Badge
          variant="outline"
          className={cn(
            "text-sm",
            complexityBadgeColors[spirit.complexity] || "",
          )}
        >
          {spirit.complexity} Complexity
        </Badge>
        {spirit.elements.map((element) => (
          <Badge
            key={element}
            variant="outline"
            className={cn("text-xs", elementBadgeColors[element] || "")}
          >
            {element}
          </Badge>
        ))}
      </div>

      {/* Power Ratings Radar Chart */}
      {hasRatings && (
        <div className="py-4">
          <PowerRadarChart ratings={spirit.powerRatings} />
        </div>
      )}

      {/* Strengths and Weaknesses */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {hasStrengths && (
          <div className="space-y-2">
            <Heading variant="h4" as="h3" className="text-green-400">
              Strengths
            </Heading>
            <ul className="space-y-1 pl-4">
              {spirit.strengths?.map((strength, i) => (
                <li key={i} className="text-sm text-muted-foreground list-disc">
                  {strength}
                </li>
              ))}
            </ul>
          </div>
        )}

        {hasWeaknesses && (
          <div className="space-y-2">
            <Heading variant="h4" as="h3" className="text-red-400">
              Weaknesses
            </Heading>
            <ul className="space-y-1 pl-4">
              {spirit.weaknesses?.map((weakness, i) => (
                <li key={i} className="text-sm text-muted-foreground list-disc">
                  {weakness}
                </li>
              ))}
            </ul>
          </div>
        )}
      </div>

      {/* Fallback for spirits without data */}
      {!hasRatings && !hasStrengths && !hasWeaknesses && (
        <Text variant="muted" className="text-center py-4">
          Detailed overview data coming soon.
        </Text>
      )}
    </section>
  );
}
```

Key implementation details:
- Graceful fallback when data is missing
- Grid layout for strengths/weaknesses (side by side on desktop)
- Green/red colors for strengths/weaknesses headers
- Reuses existing Badge and Typography components
  </action>
  <verify>Run `pnpm typecheck` - no errors</verify>
  <done>OverviewSection component with radar chart and lists</done>
</task>

<task type="auto">
  <name>Task 3: Integrate Overview into spirit detail page</name>
  <files>app/routes/spirits.$slug.tsx, app/routes/spirits.$slug.$aspect.tsx</files>
  <action>
Replace the placeholder "Overview, Growth, and Presence tracks coming in Phase 3" card with the actual OverviewSection component.

In SpiritDetailContent (used by both routes):
1. Import OverviewSection
2. Replace the placeholder div with OverviewSection
3. Pass the spirit data to OverviewSection

The page structure after this change:
```
Header
VariantTabs
Image
Name
Summary
Description
OverviewSection (NEW - replaces placeholder)
  - Complexity + Elements badges
  - Radar chart
  - Strengths list
  - Weaknesses list
```

Remove the placeholder:
```tsx
// Remove this:
<div className="border border-border rounded-lg p-4 bg-card">
  <Text variant="muted" className="text-center">
    Overview, Growth, and Presence tracks coming in Phase 3
  </Text>
</div>

// Replace with:
<OverviewSection spirit={spirit} />
```

Ensure both the base spirit route and aspect route show the OverviewSection correctly.
  </action>
  <verify>Run `pnpm dev` and navigate to /spirits/river-surges-in-sunlight - radar chart and strengths/weaknesses should display</verify>
  <done>Overview section visible on spirit detail page with real data</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. Navigate to /spirits/river-surges-in-sunlight - see radar chart
3. Radar shows 5 axes with correct labels
4. Strengths list shows 4-5 green bullet points
5. Weaknesses list shows 4-5 red bullet points
6. On mobile, chart is centered and readable
7. Navigate to aspect - overview shows (may show "coming soon" if aspects don't have ratings)
</verification>

<success_criteria>
- Radar chart renders with 5 axes (Offense, Defense, Control, Fear, Utility)
- Chart uses dark theme colors (primary color fill)
- Strengths shown as green-headed bullet list
- Weaknesses shown as red-headed bullet list
- Complexity badge visible
- Elements badges visible
- Responsive on mobile (chart centered, lists stack vertically)
</success_criteria>

<output>
After completion, create `.planning/phases/03-spirit-detail-board/03-03-SUMMARY.md`
</output>
