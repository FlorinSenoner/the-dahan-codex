---
phase: 03.1-spirit-board-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/icons/elements/index.ts
  - app/components/icons/elements/sun.tsx
  - app/components/icons/elements/moon.tsx
  - app/components/icons/elements/fire.tsx
  - app/components/icons/elements/air.tsx
  - app/components/icons/elements/water.tsx
  - app/components/icons/elements/earth.tsx
  - app/components/icons/elements/plant.tsx
  - app/components/icons/elements/animal.tsx
  - app/lib/power-dsl.ts
autonomous: true

must_haves:
  truths:
    - "Element SVG icons render with correct element colors"
    - "Power DSL types provide typed structure for growth actions"
    - "Power DSL types provide typed structure for power targeting"
  artifacts:
    - path: "app/components/icons/elements/index.ts"
      provides: "Barrel export with ElementIcon mapping"
      exports: ["ElementIcon", "SunIcon", "MoonIcon", "FireIcon", "AirIcon", "WaterIcon", "EarthIcon", "PlantIcon", "AnimalIcon"]
    - path: "app/lib/power-dsl.ts"
      provides: "Typed DSL for growth actions and power targeting"
      exports: ["GrowthAction", "PowerTargeting", "formatGrowthAction"]
  key_links:
    - from: "app/components/icons/elements/*.tsx"
      to: "app/lib/spirit-colors.ts"
      via: "CSS class for element color"
      pattern: "text-element-"
---

<objective>
Create the foundation layer for Phase 3.1: 8 element SVG icons as React components and a typed DSL module for growth actions and power targeting.

Purpose: These foundational pieces are used by growth panel, innate powers, and card hand components. Creating them first enables parallel development of dependent components.

Output:
- 8 element SVG icon components with consistent API
- power-dsl.ts with TypeScript types for growth actions and power targeting
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03.1-spirit-board-polish/03.1-RESEARCH.md
@app/lib/spirit-colors.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create 8 Element SVG Icon Components</name>
  <files>
    app/components/icons/elements/index.ts
    app/components/icons/elements/sun.tsx
    app/components/icons/elements/moon.tsx
    app/components/icons/elements/fire.tsx
    app/components/icons/elements/air.tsx
    app/components/icons/elements/water.tsx
    app/components/icons/elements/earth.tsx
    app/components/icons/elements/plant.tsx
    app/components/icons/elements/animal.tsx
  </files>
  <action>
Create 8 element SVG icon components matching Spirit Island visual style:

1. Create directory `app/components/icons/elements/`

2. Create shared interface for all icons:
```typescript
interface ElementIconProps extends React.SVGProps<SVGSVGElement> {
  size?: number;
}
```

3. Create each icon component (sun.tsx, moon.tsx, etc.) with:
   - Default size of 20px (fits well in badges/thresholds)
   - Uses `currentColor` for fill so color can be controlled via className
   - Default className uses existing element color tokens: `text-element-sun`, `text-element-moon`, etc.
   - Simple geometric shapes inspired by Spirit Island iconography:
     - Sun: Circle with radiating lines
     - Moon: Crescent shape
     - Fire: Flame shape (triangle-based)
     - Air: Three curved swoosh lines
     - Water: Droplet shape
     - Earth: Mountain/triangle shape
     - Plant: Leaf shape
     - Animal: Paw print or simple animal silhouette

4. Create barrel export in index.ts with:
   - Individual named exports for each icon
   - `ElementIcon` Record mapping element names to components for dynamic rendering

Reference spirit-colors.ts for the existing `--element-*` CSS color tokens.
  </action>
  <verify>
1. Run `pnpm typecheck` - no errors in icons directory.
2. Verify each icon file exists and exports properly.
3. Create a temporary test: In dev server, import and render each icon in a test component to visually confirm they display correctly with appropriate shapes and colors. Remove test after verification.
  </verify>
  <done>
8 element icon components exist with consistent API, barrel export provides ElementIcon mapping for dynamic rendering, icons visually render with correct shapes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Power DSL Types Module</name>
  <files>app/lib/power-dsl.ts</files>
  <action>
Create typed DSL module for growth actions and power targeting:

1. Growth Action Types (discriminated union):
```typescript
export type GrowthAction =
  | { type: "reclaim"; variant: "all" | "one" }
  | { type: "gainEnergy"; amount: number }
  | { type: "gainPowerCard"; cardType?: "minor" | "major" }
  | { type: "addPresence"; range: number; terrain?: string }
  | { type: "pushFromLands"; count: number; pieceType: string }
  | { type: "damage"; amount: number; target: string }
  | { type: "gainElement"; element: string };
```

2. Power Targeting Types:
```typescript
export interface PowerRange {
  type: "numeric" | "spirit" | "none";
  value?: number;
  fromSacredSite?: boolean;
  terrain?: string;
}

export interface PowerTarget {
  type: "land" | "spirit" | "invaders" | "dahan" | "any";
  restrictions?: string[];
}

export interface PowerTargeting {
  speed: "Fast" | "Slow";
  range: PowerRange;
  target: PowerTarget;
}
```

3. Helper functions:
- `formatGrowthAction(action: GrowthAction): string` - Human-readable text
- `formatRange(range: PowerRange): string` - e.g., "Sacred Site", "1", "Any Spirit"
- `formatTarget(target: PowerTarget): string` - e.g., "Any Land", "Land with Invaders"

4. Element type constant:
```typescript
export const ELEMENTS = ["Sun", "Moon", "Fire", "Air", "Water", "Earth", "Plant", "Animal"] as const;
export type Element = typeof ELEMENTS[number];
```
  </action>
  <verify>
Run `pnpm typecheck` - no errors in power-dsl.ts.
Import types in a test and verify they work with sample data.
  </verify>
  <done>
power-dsl.ts exports GrowthAction, PowerTargeting, PowerRange, PowerTarget types and formatGrowthAction helper.
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes with no errors
2. All 8 element icons exist in app/components/icons/elements/
3. power-dsl.ts exports all required types
4. ElementIcon["Sun"] resolves to SunIcon component
5. Icons render visually in browser with correct shapes and colors
</verification>

<success_criteria>
- 8 element SVG icons created with Spirit Island-inspired designs
- Power DSL module provides typed structures for growth actions and power targeting
- All exports are properly typed and importable
- Icons visually verified to render correctly
- Foundation ready for dependent plans (02-07)
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-spirit-board-polish/03.1-01-SUMMARY.md`
</output>
