---
phase: 03.1-spirit-board-polish
plan: 06
type: execute
wave: 2
depends_on: ["03.1-01", "03.1-02"]
files_modified:
  - app/components/spirits/innate-powers.tsx
  - app/components/spirits/card-hand.tsx
autonomous: true

must_haves:
  truths:
    - "Innate powers display speed/range/target header"
    - "Element thresholds use SVG icons instead of text badges"
    - "Cards section renamed to 'Cards' not 'Starting Cards'"
    - "Cards have speed-based outline colors (Fast=amber, Slow=blue)"
    - "Cards display range and target fields"
  artifacts:
    - path: "app/components/spirits/innate-powers.tsx"
      provides: "Innate powers with element icons and speed/range/target header"
      contains: "ElementIcon"
    - path: "app/components/spirits/card-hand.tsx"
      provides: "Cards section with speed-based outlines and shared element display"
      contains: "border-amber"
  key_links:
    - from: "app/components/spirits/innate-powers.tsx"
      to: "app/components/icons/elements"
      via: "ElementIcon import for threshold display"
      pattern: "ElementIcon"
    - from: "app/components/spirits/card-hand.tsx"
      to: "app/components/icons/elements"
      via: "ElementIcon import for card elements"
      pattern: "ElementIcon"
---

<objective>
Enhance innate powers and card hand components with element SVG icons, proper speed/range/target display, and consistent styling between the two components.

Purpose: Both components display power information and should share element display DSL. Innate powers need speed/range/target header, cards need speed-based outlines and range/target fields.

Output:
- Innate powers with element SVG icons and horizontal header
- Cards with speed-based colored outlines and range/target display
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03.1-spirit-board-polish/03.1-RESEARCH.md
@.planning/phases/03.1-spirit-board-polish/03.1-01-SUMMARY.md
@.planning/phases/03.1-spirit-board-polish/03.1-02-SUMMARY.md
@app/components/spirits/innate-powers.tsx
@app/components/spirits/card-hand.tsx
@app/components/icons/elements/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Innate Powers with Element Icons</name>
  <files>app/components/spirits/innate-powers.tsx</files>
  <action>
Enhance innate-powers.tsx with element SVG icons and improved header:

1. Import element icons:
```typescript
import { ElementIcon } from "@/components/icons/elements";
```

2. Update ElementThreshold to use SVG icons instead of text badges:
```typescript
function ElementThreshold({
  elements,
}: {
  elements: Record<string, number | undefined>;
}) {
  const elementCounts = ELEMENT_ORDER
    .filter((el) => elements[el as keyof typeof elements])
    .map((el) => ({
      element: el,
      count: elements[el as keyof typeof elements] || 0,
    }));

  return (
    <div className="flex items-center gap-2">
      {elementCounts.map(({ element, count }) => {
        const Icon = ElementIcon[element];
        return (
          <div key={element} className="flex items-center gap-0.5">
            <span className="text-sm font-medium text-muted-foreground">
              {count}
            </span>
            {Icon && <Icon size={18} />}
          </div>
        );
      })}
    </div>
  );
}
```

3. Add horizontal speed/range/target header to each innate:
```typescript
function PowerHeader({
  speed,
  range,
  target,
}: {
  speed: "Fast" | "Slow";
  range?: string;
  target?: string;
}) {
  return (
    <div className="flex items-center gap-3 text-xs text-muted-foreground mb-2">
      <Badge
        variant="outline"
        className={cn(
          speed === "Fast"
            ? "border-amber-500/50 text-amber-400"
            : "border-blue-500/50 text-blue-400"
        )}
      >
        {speed}
      </Badge>
      {range && (
        <span>
          <span className="text-muted-foreground/70">Range:</span> {range}
        </span>
      )}
      {target && (
        <span>
          <span className="text-muted-foreground/70">Target:</span> {target}
        </span>
      )}
    </div>
  );
}
```

4. Update AccordionContent to show header before thresholds:
```typescript
<AccordionContent className="pb-4 space-y-3">
  <PowerHeader
    speed={innate.speed}
    range={innate.range}
    target={innate.target}
  />
  <div className="space-y-3">
    {innate.thresholds.map((threshold) => (
      // ... threshold display
    ))}
  </div>
</AccordionContent>
```

5. Keep existing accordion structure but enhance styling.
  </action>
  <verify>
Run `pnpm dev` and navigate to /spirits/river-surges-in-sunlight.
Verify: Innate powers show SVG element icons in thresholds, horizontal speed/range/target header visible.
  </verify>
  <done>
Innate powers display element SVG icons and speed/range/target header.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Card Hand with Speed-Based Outlines</name>
  <files>app/components/spirits/card-hand.tsx</files>
  <action>
Update card-hand.tsx with new styling and range/target display:

1. Import element icons:
```typescript
import { ElementIcon } from "@/components/icons/elements";
```

2. Rename section from "Starting Cards" to "Cards":
```typescript
<Heading variant="h3" as="h2">
  Cards
</Heading>
```

3. Add speed-based border outline to each card:
```typescript
<div
  className={cn(
    "min-w-[200px] max-w-[280px] p-3 rounded-lg",
    "border-2",
    power.speed === "Fast"
      ? "border-amber-500/60 bg-amber-500/5"
      : "border-blue-500/60 bg-blue-500/5"
  )}
>
```

4. Update card layout to two-line format:
   - Line 1: Speed badge, Range, Target
   - Line 2: Element icons
```typescript
<div className="space-y-2">
  {/* Line 1: Speed/Range/Target */}
  <div className="flex items-center gap-2 text-xs text-muted-foreground">
    <Badge
      variant="outline"
      className={cn(
        "text-xs",
        power.speed === "Fast"
          ? "border-amber-500/50 text-amber-400"
          : "border-blue-500/50 text-blue-400"
      )}
    >
      {power.speed}
    </Badge>
    {power.range && <span>R: {power.range}</span>}
    {power.target && <span>T: {power.target}</span>}
  </div>

  {/* Line 2: Element icons */}
  <div className="flex items-center gap-1">
    {power.elements.map((element) => {
      const Icon = ElementIcon[element];
      return Icon ? <Icon key={element} size={16} /> : null;
    })}
  </div>
</div>
```

5. Keep existing cost display and name display.

6. Support new range/target fields from schema (optional, render only if present).
  </action>
  <verify>
Run `pnpm dev` and navigate to /spirits/river-surges-in-sunlight.
Verify: Section says "Cards", cards have amber outline for Fast / blue for Slow, element SVG icons shown.
  </verify>
  <done>
Cards section renamed, cards have speed-based outlines, element SVG icons displayed.
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. Innate powers show element SVG icons (not text badges)
3. Innate powers show speed/range/target header
4. Cards section titled "Cards" not "Starting Cards"
5. Fast cards have amber outline, Slow cards have blue outline
6. Cards show element SVG icons
7. Range/target displayed when present in data
</verification>

<success_criteria>
- Innate powers UAT issues resolved: element icons, speed/range/target header
- Cards UAT issues resolved: renamed, speed-based outlines, element icons
- Shared element display DSL via ElementIcon import
- Consistent styling between innate powers and cards
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-spirit-board-polish/03.1-06-SUMMARY.md`
</output>
